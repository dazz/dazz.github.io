<!doctype html><html lang=en-us><head><meta name=viewport content="width=device-width"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=7"><link rel=icon href=/favicon.png><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=icon href=/logo.svg type=image/svg+xml><title>Dynamic Route loading in a non standard Symfony structure &ndash;
DazzLog
</title><link href=/symbols-nerd-font/symbols-nerd-font.css rel=stylesheet integrity="sha512-lydow8GLOLlYNOtHlksNCmGWWCBsbIEtikXpHzfWqx78HLlyQZHOzyLwPpKol4Th6aCwLUXOfODVYgwrd3nwKQ=="><link href=/jetbrains-mono/jetbrains-mono.css rel=stylesheet integrity="sha512-tJxlgL6v1Y7kFf+qB8SloaAMKnOAw6WouknxXtIjkBux9Y/9aX81EUWOJO8c/3l98DmjG8brr4to7zaez606Fg=="><link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><link type=text/css rel=stylesheet href=https://blog.dazzlog.de/css/styles.4cc5b44d2911850eff47f56aa47cf090cbf716e33b1402121dda9f57e3956ac2a0605e88a22879e94ee12718f6b575e2d14c94a5587a4cece78417335ed11201.css integrity="sha512-TMW0TSkRhQ7/R/VqpHzwkMv3FuM7FAISHdqfV+OVasKgYF6Ioih56U7hJxj2tXXi0UyUpVh6TOznhBczXtESAQ=="><link type=text/css rel=stylesheet href=https://blog.dazzlog.de/css/admonition.4f74a582f25db376d45ea24a8d1ccae7ae59d67efaf1930faad652cd9fb567cab1b43931c189bb9d41575d3b2da0fc718c5830a87bd1888f98a7fddbe03399cd.css integrity="sha512-T3SlgvJds3bUXqJKjRzK565Z1n768ZMPqtZSzZ+1Z8qxtDkxwYm7nUFXXTstoPxxjFgwqHvRiI+Yp/3b4DOZzQ=="><link type=text/css rel=stylesheet href=https://blog.dazzlog.de/css/custom.e3414e6d4a952c3fc57a01061a8e1ee0d58131bb73947c6ab03915d712730d0040c9f603dd985fb9e6e3bce89c86736f98628355433e35b6a3a3e2da7e79d76f.css integrity="sha512-40FObUqVLD/FegEGGo4e4NWBMbtzlHxqsDkV1xJzDQBAyfYD3ZhfuebjvOichnNvmGKDVUM+Nbajo+LafnnXbw=="><meta name=author content="dazz | Anne-Julia Seitz"><meta name=keywords content='clean architecture,ddd,routing,symfony'><meta name=description content=" Symfony&amp;rsquo;s standard structure there are some things that do not work out of the box anymore. One of it is routing.
Default Symfony If you start a fresh Symfony project you will be presented with the following stricture:
app/src ├─ Controller ├─ Entity ├─ Repository └─ Kernel.php The routing config looks like this:
# app/config/routes.yaml controllers: resource: path: ../src/Controller/ namespace: App\Controller type: attribute So the Controller directory is the place all controllers go you might think first."><meta property="og:site_name" content='DazzLog'><meta property="og:title" content="Dynamic Route loading in a non standard Symfony structure"><meta property="og:type" content="article"><meta property="article:author" content="dazz | Anne-Julia Seitz"><meta property="article:published_time" content='2024-08-16T23:42:23Z+0100'><meta property="article:tag" content="clean architecture"><meta property="article:tag" content="ddd"><meta property="article:tag" content="routing"><meta property="article:tag" content="symfony"><meta property="og:url" content="https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony/"><meta property="og:image" content="https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony//loading-route-in-a-symphonical-way.webp"><meta property="og:description" content="When you divert from Symfony&amp;rsquo;s standard structure there are some things that do not work out of the box anymore. One of it is routing.
Default Symfony If "><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content='blog.dazzlog.de'><meta property="twitter:url" content="https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony/"><meta name=twitter:title content="Dynamic Route loading in a non standard Symfony structure"><meta name=twitter:image content="https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony//loading-route-in-a-symphonical-way.webp"><meta name=twitter:description content="When you divert from Symfony&amp;rsquo;s standard structure there are some things that do not work out of the box anymore. One of it is routing.
Default Symfony If "><link rel=manifest href=/manifest/index.json></head><body><div id=baseContainer><header><div class=titleAndSearchContainer><div id=titleContainer><a class=unstyledLink href=/><img src=/logo.svg alt=Logo></a><div class=rightOfLogo><div class=titleAndHamburger><h1><a class=unstyledLink href=/>DazzLog</a></h1><label id=hamburger-menu for=main-nav-toggler>&#xf85b;</label></div><div id=wide_nav><nav><input type=checkbox id=main-nav-toggler><ul id=main-nav><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li></ul></nav></div></div></div><div class=search><input id=searchbar type=text placeholder=Search>
<a class=nerdlink onclick=newSearch()>&#xf002;</a></div><script>function newSearch(){let e=searchbar.value.trim();if(!e)return;location.href=`/search?q=${e}`}searchbar.onkeyup=e=>{e.keyCode==13&&newSearch()}</script></div><div id=links><a rel=noreferrer target=_blank class=nerdlink href=/index.xml>&#xf09e;
<span>RSS
</span></a><a rel=noreferrer target=_blank class=nerdlink href=https://github.com/dazz>&#xf09b;
<span>GitHub
</span></a><a rel=me target=_blank class=nerdlink href=https://phpc.social/@dazz><svg class="pseudofont" xmlns:svg="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><path d="M7.4779094-.1598624e-5C5.5602384.0156984 3.7155894.2233384 2.6405814.7170384c0 0-2.13206093.9537-2.13206093 4.20766.0.74512-.01448 1.63603.0091 2.58084.07742 3.1821946.58336693 6.3183886 3.52553593 7.0971276 1.356568.359063 2.521335.434289 3.45936.382729 1.701085-.09431 2.6560206-.607063 2.6560206-.607063l-.05611-1.234252s-1.2156316.383272-2.5808476.33656c-1.352609-.04639-2.780561-.145832-2.999328-1.80651-.0202-.145872-.03031-.301902-.03031-.465714.0-1e-6 1.327834.324572 3.010574.40167 1.028943.0472 1.993827-.06028 2.9738766-.177218 1.879445-.224425 3.515901-1.382448 3.721577-2.4405646.32407-1.666815.297376-4.067605.297376-4.067605.0-3.25396-2.131943-4.20766-2.131943-4.20766C11.288476.2233384 9.4426784.0156784 7.5250084-.1598624e-5zM5.3076104 2.5424984c.798781.0 1.403595.30701 1.803551.92113l.388886.65181.388884-.65181c.399875-.61412 1.00469-.92113 1.803551-.92113.6903266.0 1.2465526.24267 1.6713186.71609.411755.47342.61677 1.11337.61677 1.91862v3.939988h-1.560986v-3.824218c0-.80613-.339166-1.21531-1.0176126-1.21531-.750129.0-1.126049.48533-1.126049 1.44509v2.09324h-1.551753v-2.09324c0-.95976-.376039-1.44509-1.126168-1.44509-.678446.0-1.017613.40918-1.017613 1.21531v3.824218h-1.560985v-3.939988c0-.80525.205053-1.4452.616889-1.91862.424685-.47342.980911-.71609 1.671317-.71609z"/></svg>
<span>Mastodon</span></a></div></header><div id=contentContainer><div id=content><main><article class="card single"><h1>Dynamic Route loading in a non standard Symfony structure</h1><p class=date><span title=Date> </span>2024-08-16</p><figure style=margin:0><img src=https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony//loading-route-in-a-symphonical-way.webp alt></figure><div><p>When you divert from Symfony&rsquo;s standard structure there are some things that do not work out of the box anymore. One of it is routing.</p><h2 id=default-symfony>Default Symfony</h2><p>If you start a fresh Symfony project you will be presented with the following stricture:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>app/src  
</span></span><span style=display:flex><span>├─ Controller
</span></span><span style=display:flex><span>├─ Entity
</span></span><span style=display:flex><span>├─ Repository
</span></span><span style=display:flex><span>└─ Kernel.php
</span></span></code></pre></div><p>The routing config looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#6272a4># app/config/routes.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>controllers</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resource</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>path</span>: ../src/Controller/
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>namespace</span>: App\Controller
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>type</span>: attribute
</span></span></code></pre></div><p>So the <code>Controller</code> directory is the place all controllers go you might think first. But When the project gets bigger a different structure might make more sense.</p><h2 id=the-dddclean-architecture-approach>The DDD/Clean Architecture approach</h2><p>If we use a DDD/Clean Architecture approach the structure might look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>app/src
</span></span><span style=display:flex><span>├─ Blog 
</span></span><span style=display:flex><span>│ ├─ Application
</span></span><span style=display:flex><span>│ │ └─ CreateArticleController.php
</span></span><span style=display:flex><span>│ ├─ Domain
</span></span><span style=display:flex><span>│ │ └─ Article.php
</span></span><span style=display:flex><span>│ └─ Infrastructure
</span></span><span style=display:flex><span>├─ Registration
</span></span><span style=display:flex><span>│ ├─ Application
</span></span><span style=display:flex><span>│ │ ├─ CreateAccountController.php
</span></span><span style=display:flex><span>│ │ ├─ CreateAccountRequest.php
</span></span><span style=display:flex><span>│ │ └─ CreateAccountResponse.php
</span></span><span style=display:flex><span>│ ├─ Domain
</span></span><span style=display:flex><span>│ │ └─ Account.php
</span></span><span style=display:flex><span>│ └─ Infrastructure
</span></span><span style=display:flex><span>└─ Kernel.php
</span></span></code></pre></div><p>But now every Controller needs to be added to the routing config since the loading expects all controllers in one place.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class=icon>&#xf400;</i> tip<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>Configs should be kept clean and small</div></div></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#6272a4># app/config/routes.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>app_registration_createaccount</span>:
</span></span><span style=display:flex><span>    <span style=color:#6272a4># loads routes from the PHP attributes of the given class</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resource</span>: App\Registration\CreateAccountController
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>type</span>:     attribute
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>app_blog_createarticle</span>:
</span></span><span style=display:flex><span>    <span style=color:#6272a4># loads routes from the PHP attributes of the given class</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resource</span>: App\Blog\CreateArticleController
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>type</span>:     attribute
</span></span></code></pre></div><p>This is not the comfortable way, since we were starting to embrace the <code>Route</code> attribute because it means we do not need to add each route to the routing config in a growing file and developers must not forget to add or update each route which might get annoying during refactoring.</p><h2 id=loading-routes-dynamic>Loading Routes dynamic</h2><p>In Symfony there is a simple way we can solve this: <a href=https://symfony.com/doc/current/routing/custom_route_loader.html>We can create our own loader with a custom service</a>.</p><h2 id=the-implementation>The implementation</h2><div class="details admonition symfony open"><div class="details-summary admonition-title"><i class=icon>&#xe756;</i> From the Symfony Documentation<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><blockquote><p>When the main loader parses this, it tries all registered delegate loaders.</p></blockquote><blockquote><p>If you&rsquo;re using <a href=https://symfony.com/doc/current/service_container.html#services-autoconfigure>autoconfigure</a>, your class should implement the <a href=https://github.com/symfony/symfony/blob/7.1/src/Symfony/Bundle/FrameworkBundle/Routing/RouteLoaderInterface.php title=Symfony\Bundle\FrameworkBundle\Routing\RouteLoaderInterface>RouteLoaderInterface</a> interface to be tagged automatically.</p></blockquote><blockquote><p>If your service is invokable, you don&rsquo;t need to specify the method to use.</p></blockquote><blockquote><p>Your service doesn&rsquo;t have to extend or implement any special class, but the called method must return a <a href=https://github.com/symfony/symfony/blob/7.1/src/Symfony/Component/Routing/RouteCollection.php title=Symfony\Component\Routing\RouteCollection>RouteCollection</a> object.</p></blockquote></div></div></div><p>All good points</p><ul><li>We create an invokable service class</li><li>Implement the <code>RouteLoaderInterface</code></li><li>Let it return a <code>RouteCollection</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>app/src
</span></span><span style=display:flex><span>├─ Blog
</span></span><span style=display:flex><span>│ └─ Application
</span></span><span style=display:flex><span>│   └─ CreateArticleController.php
</span></span><span style=display:flex><span>├─ Registration
</span></span><span style=display:flex><span>│ └─ Application
</span></span><span style=display:flex><span>│   └─ CreateAccountController.php
</span></span><span style=display:flex><span>├─ Shared
</span></span><span style=display:flex><span>│ └─ Application
</span></span><span style=display:flex><span>│   └─ Routing
</span></span><span style=display:flex><span>│     └─ RouteLoader.php &lt;<span style=color:#ff79c6>===</span> here
</span></span><span style=display:flex><span>└─ Kernel.php
</span></span></code></pre></div><p>The Loader class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>&lt;?</span>php  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ff79c6>declare</span>(strict_types<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Shared\Application\Routing;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> ReflectionClass;  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Bundle\FrameworkBundle\Routing\RouteLoaderInterface;  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Finder\Finder;  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Routing\Attribute\Route <span style=color:#ff79c6>as</span> RouteAttribute;  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Routing\Route;  
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Routing\RouteCollection;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>RouteLoader</span> <span style=color:#ff79c6>implements</span> RouteLoaderInterface  
</span></span><span style=display:flex><span>{  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> bool <span style=color:#8be9fd;font-style:italic>$isLoaded</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> __construct(<span style=color:#ff79c6>private</span> readonly string <span style=color:#8be9fd;font-style:italic>$routeLoaderBaseDirectory</span>)  
</span></span><span style=display:flex><span>    {  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> __invoke(mixed <span style=color:#8be9fd;font-style:italic>$resource</span>, string <span style=color:#8be9fd;font-style:italic>$type</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>null</span>)<span style=color:#ff79c6>:</span> RouteCollection  
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>isLoaded</span>) {  
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>throw</span> <span style=color:#ff79c6>new</span> \RuntimeException(<span style=color:#f1fa8c>&#39;Do not add this loader twice.&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$routeCollection</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> RouteCollection();  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$finder</span> <span style=color:#ff79c6>=</span> self<span style=color:#ff79c6>::</span><span style=color:#50fa7b>fromDirectories</span>(
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>routeLoaderBaseDirectory</span>,
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>routeLoaderBaseDirectory</span> <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;/*/**&#39;</span>,
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>foreach</span> (<span style=color:#8be9fd;font-style:italic>$finder</span> <span style=color:#ff79c6>as</span> <span style=color:#8be9fd;font-style:italic>$file</span>) {
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$className</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getClassNameFromFile</span>(<span style=color:#8be9fd;font-style:italic>$file</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getRealPath</span>());
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getClassNamespaceFromFile</span>(<span style=color:#8be9fd;font-style:italic>$file</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getRealPath</span>());
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> (<span style=color:#ff79c6>!</span><span style=color:#8be9fd;font-style:italic>$className</span> <span style=color:#ff79c6>||</span> <span style=color:#ff79c6>!</span><span style=color:#8be9fd;font-style:italic>$namespace</span>) {
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>continue</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$fullQualifiedClassName</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;\\&#39;</span> <span style=color:#ff79c6>.</span> <span style=color:#8be9fd;font-style:italic>$className</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Use reflection to check for Symfony Route attributes
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#8be9fd;font-style:italic>$reflectionClass</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> ReflectionClass(<span style=color:#8be9fd;font-style:italic>$fullQualifiedClassName</span>);
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$attributes</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getRouteAttributes</span>(<span style=color:#8be9fd;font-style:italic>$reflectionClass</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Handle class-level attributes for invokable controller classes
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$reflectionClass</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>hasMethod</span>(<span style=color:#f1fa8c>&#39;__invoke&#39;</span>)) {
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>foreach</span> (<span style=color:#8be9fd;font-style:italic>$attributes</span> <span style=color:#ff79c6>as</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$route</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>createRouteFromAttribute</span>(<span style=color:#8be9fd;font-style:italic>$routeAttribute</span>);
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$routeName</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getName</span>() <span style=color:#ff79c6>??</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>generateRouteName</span>(<span style=color:#8be9fd;font-style:italic>$fullQualifiedClassName</span>, <span style=color:#f1fa8c>&#39;__invoke&#39;</span>); 
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$routeCollection</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>add</span>(<span style=color:#8be9fd;font-style:italic>$routeName</span>, <span style=color:#8be9fd;font-style:italic>$route</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>continue</span>; <span style=color:#6272a4>// there should only be a class declaration when invokable
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Handle method-level attributes
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>foreach</span> (<span style=color:#8be9fd;font-style:italic>$reflectionClass</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getMethods</span>() <span style=color:#ff79c6>as</span> <span style=color:#8be9fd;font-style:italic>$method</span>) {
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>foreach</span> (<span style=color:#8be9fd;font-style:italic>$attributes</span> <span style=color:#ff79c6>as</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$route</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>createRouteFromAttribute</span>(<span style=color:#8be9fd;font-style:italic>$routeAttribute</span>);
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$routeName</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getName</span>() <span style=color:#ff79c6>??</span> <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>generateRouteName</span>(<span style=color:#8be9fd;font-style:italic>$fullQualifiedClassName</span>, <span style=color:#8be9fd;font-style:italic>$method</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getName</span>());
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$routeCollection</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>add</span>(<span style=color:#8be9fd;font-style:italic>$routeName</span>, <span style=color:#8be9fd;font-style:italic>$route</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$this</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>isLoaded</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$routeCollection</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @see https://stackoverflow.com/a/39887697
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>getClassNameFromFile</span>(<span style=color:#8be9fd;font-style:italic>$filePathName</span>)<span style=color:#ff79c6>:</span> string  
</span></span><span style=display:flex><span>    {  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$contents</span> <span style=color:#ff79c6>=</span> file_get_contents(<span style=color:#8be9fd;font-style:italic>$filePathName</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$classes</span> <span style=color:#ff79c6>=</span> [];  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$tokens</span> <span style=color:#ff79c6>=</span> token_get_all(<span style=color:#8be9fd;font-style:italic>$contents</span>);  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$count</span> <span style=color:#ff79c6>=</span> count(<span style=color:#8be9fd;font-style:italic>$tokens</span>);  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>for</span> (<span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>2</span>; <span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>&lt;</span> <span style=color:#8be9fd;font-style:italic>$count</span>; <span style=color:#8be9fd;font-style:italic>$i</span><span style=color:#ff79c6>++</span>) {  
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>2</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>==</span> T_CLASS  
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>==</span> T_WHITESPACE  
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>][<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>==</span> T_STRING  
</span></span><span style=display:flex><span>            ) {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>                <span style=color:#8be9fd;font-style:italic>$className</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>][<span style=color:#bd93f9>1</span>];  
</span></span><span style=display:flex><span>                <span style=color:#8be9fd;font-style:italic>$classes</span>[] <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$className</span>;  
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> array_pop(<span style=color:#8be9fd;font-style:italic>$classes</span>);  
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>getClassNamespaceFromFile</span>(<span style=color:#8be9fd;font-style:italic>$filePathName</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>?</span>string  
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$src</span> <span style=color:#ff79c6>=</span> file_get_contents(<span style=color:#8be9fd;font-style:italic>$filePathName</span>);  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$tokens</span> <span style=color:#ff79c6>=</span> token_get_all(<span style=color:#8be9fd;font-style:italic>$src</span>);  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$count</span> <span style=color:#ff79c6>=</span> count(<span style=color:#8be9fd;font-style:italic>$tokens</span>);  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>;  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span>;  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$namespaceOk</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>false</span>;  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>while</span> (<span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>&lt;</span> <span style=color:#8be9fd;font-style:italic>$count</span>) {  
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$token</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>];  
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> (is_array(<span style=color:#8be9fd;font-style:italic>$token</span>) <span style=color:#ff79c6>&amp;&amp;</span> <span style=color:#8be9fd;font-style:italic>$token</span>[<span style=color:#bd93f9>0</span>] <span style=color:#ff79c6>===</span> T_NAMESPACE) {  
</span></span><span style=display:flex><span>                <span style=color:#6272a4>// Found namespace declaration  
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>                <span style=color:#ff79c6>while</span> (<span style=color:#ff79c6>++</span><span style=color:#8be9fd;font-style:italic>$i</span> <span style=color:#ff79c6>&lt;</span> <span style=color:#8be9fd;font-style:italic>$count</span>) {  
</span></span><span style=display:flex><span>                    <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>] <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;;&#39;</span>) {  
</span></span><span style=display:flex><span>                        <span style=color:#8be9fd;font-style:italic>$namespaceOk</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>true</span>;  
</span></span><span style=display:flex><span>                        <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>=</span> trim(<span style=color:#8be9fd;font-style:italic>$namespace</span>);  
</span></span><span style=display:flex><span>                        <span style=color:#ff79c6>break</span>;  
</span></span><span style=display:flex><span>                    }  
</span></span><span style=display:flex><span>                    <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>.=</span> is_array(<span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>]) <span style=color:#ff79c6>?</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>][<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$tokens</span>[<span style=color:#8be9fd;font-style:italic>$i</span>];  
</span></span><span style=display:flex><span>                }  
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>break</span>;  
</span></span><span style=display:flex><span>            }  
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$i</span><span style=color:#ff79c6>++</span>;  
</span></span><span style=display:flex><span>        }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$namespaceOk</span> <span style=color:#ff79c6>?</span> <span style=color:#8be9fd;font-style:italic>$namespace</span> <span style=color:#ff79c6>:</span> <span style=color:#ff79c6>null</span>;  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>createRouteFromAttribute</span>(RouteAttribute <span style=color:#8be9fd;font-style:italic>$routeAttribute</span>)<span style=color:#ff79c6>:</span> Route  
</span></span><span style=display:flex><span>    {        <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>new</span> Route(  
</span></span><span style=display:flex><span>            path<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getPath</span>(),  
</span></span><span style=display:flex><span>            defaults<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getDefaults</span>(),  
</span></span><span style=display:flex><span>            requirements<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getRequirements</span>(),  
</span></span><span style=display:flex><span>            options<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getOptions</span>(),  
</span></span><span style=display:flex><span>            host<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getHost</span>(),  
</span></span><span style=display:flex><span>            schemes<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getSchemes</span>(),  
</span></span><span style=display:flex><span>            methods<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getMethods</span>(),  
</span></span><span style=display:flex><span>            condition<span style=color:#ff79c6>:</span> <span style=color:#8be9fd;font-style:italic>$routeAttribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getCondition</span>()  
</span></span><span style=display:flex><span>        );  
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>/**  
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     * @return RouteAttribute[]  
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>getRouteAttributes</span>(ReflectionClass <span style=color:#8be9fd;font-style:italic>$reflectionClass</span>)<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>array</span>  
</span></span><span style=display:flex><span>    {  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> array_map(fn(\ReflectionAttribute <span style=color:#8be9fd;font-style:italic>$attribute</span>) <span style=color:#ff79c6>=&gt;</span> <span style=color:#8be9fd;font-style:italic>$attribute</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>newInstance</span>(), <span style=color:#8be9fd;font-style:italic>$reflectionClass</span><span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>getAttributes</span>(RouteAttribute<span style=color:#ff79c6>::</span><span style=color:#50fa7b>class</span>));  
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>generateRouteName</span>(string <span style=color:#8be9fd;font-style:italic>$className</span>, string <span style=color:#8be9fd;font-style:italic>$methodName</span>)<span style=color:#ff79c6>:</span> string  
</span></span><span style=display:flex><span>    {  
</span></span><span style=display:flex><span>        <span style=color:#8be9fd;font-style:italic>$routeName</span> <span style=color:#ff79c6>=</span> strtolower(str_replace(  
</span></span><span style=display:flex><span>            [<span style=color:#f1fa8c>&#39;\\&#39;</span>, <span style=color:#f1fa8c>&#39;Controller&#39;</span>, <span style=color:#f1fa8c>&#39;Application_&#39;</span>],  
</span></span><span style=display:flex><span>            [<span style=color:#f1fa8c>&#39;_&#39;</span>, <span style=color:#f1fa8c>&#39;&#39;</span>, <span style=color:#f1fa8c>&#39;&#39;</span>],  
</span></span><span style=display:flex><span>            <span style=color:#8be9fd;font-style:italic>$className</span>)  
</span></span><span style=display:flex><span>        );  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (<span style=color:#8be9fd;font-style:italic>$methodName</span> <span style=color:#ff79c6>===</span> <span style=color:#f1fa8c>&#39;__invoke&#39;</span>) {  
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$routeName</span>;  
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>$routeName</span> <span style=color:#ff79c6>.</span> <span style=color:#f1fa8c>&#39;_&#39;</span> <span style=color:#ff79c6>.</span> <span style=color:#8be9fd;font-style:italic>$methodName</span>;  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>private</span> <span style=color:#ff79c6>static</span> <span style=color:#ff79c6>function</span> <span style=color:#50fa7b>fromDirectories</span>(string <span style=color:#8be9fd;font-style:italic>$dir</span>, string <span style=color:#ff79c6>...</span><span style=color:#8be9fd;font-style:italic>$moreDirs</span>)<span style=color:#ff79c6>:</span> Finder  
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> (<span style=color:#ff79c6>new</span> Finder())<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>in</span>(<span style=color:#8be9fd;font-style:italic>$dir</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>in</span>(<span style=color:#8be9fd;font-style:italic>$moreDirs</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>files</span>()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>name</span>(<span style=color:#f1fa8c>&#39;*Controller.php&#39;</span>)<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>sortByName</span>()<span style=color:#ff79c6>-&gt;</span><span style=color:#50fa7b>followLinks</span>();  
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Add the class in the routing config:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#6272a4># app/config/routing.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>controllers</span>:  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resource</span>: App\Shared\Application\Routing\RouteLoader  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>type</span>: service
</span></span></code></pre></div><p>One thing still left to do is make the path with the <code>$routeLoaderBaseDirectory</code> in the service configuration autowirable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#6272a4># app/config/services.yaml</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>parameters</span>:  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ff79c6>services</span>:  
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>_defaults</span>:  
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>autowire</span>: <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>autoconfigure</span>: <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>bind</span>:
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>string $routeLoaderBaseDirectory</span>: <span style=color:#f1fa8c>&#39;%kernel.project_dir%/src&#39;</span>
</span></span></code></pre></div><h2 id=controller>Controller</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff79c6>namespace</span> App\Registration\Application;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\HttpFoundation\Request;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\HttpKernel\Attribute\AsController;
</span></span><span style=display:flex><span><span style=color:#ff79c6>use</span> Symfony\Component\Routing\Attribute\Route;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>#[AsController] # to make it autowirable
</span></span></span><span style=display:flex><span><span style=color:#6272a4>#[Route(
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    path<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;/registration/createaccount&#39;</span>,
</span></span><span style=display:flex><span>    name<span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;app_registration_createaccount&#39;</span>,
</span></span><span style=display:flex><span>    methods<span style=color:#ff79c6>:</span> [Request<span style=color:#ff79c6>::</span><span style=color:#50fa7b>METHOD_POST</span>]
</span></span><span style=display:flex><span>)]
</span></span><span style=display:flex><span><span style=color:#ff79c6>final</span> readonly <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>CreateAccountController</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>public</span> <span style=color:#ff79c6>function</span> __invoke(CreateAccountRequest <span style=color:#8be9fd;font-style:italic>$request</span>)<span style=color:#ff79c6>:</span> CreateAccountResponse
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#6272a4>// create account logic
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>        <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>new</span> CreateAccountResponse();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=binconsole-debugrouter><code>bin/console debug:router</code></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; bin/console debug:router
</span></span><span style=display:flex><span> -------------------------------- -------- -------- ------ ----------------------------- 
</span></span><span style=display:flex><span>  Name                             Method   Scheme   Host   Path                         
</span></span><span style=display:flex><span> -------------------------------- -------- -------- ------ ----------------------------- 
</span></span><span style=display:flex><span>  app_blog_createarticle           POST     ANY      ANY    /blog/article  
</span></span><span style=display:flex><span>  app_registration_createaccount   POST     ANY      ANY    /registration/account
</span></span><span style=display:flex><span> -------------------------------- -------- -------- ------ -----------------------------
</span></span></code></pre></div><h2 id=happy-loading-routes-everyone>Happy loading routes everyone!</h2><h4 id=more-sources>More sources</h4><ul><li><a href=https://gist.github.com/dazz/151ed59887dc0299c4f462c33b701c94>gist.github.com/dazz RouteLoader.php</a></li><li><a href=https://tomasvotruba.com/blog/2-tricks-to-get-your-symfony-configs-lines-to-minimum>tomasvotruba.com - 2 Tricks to get your Symfony configs lines to minimum</a></li></ul></div></article><p class=articleTagsContainer><span> </span><strong>Tags:</strong>
<a href=/tags/clean-architecture>#clean architecture</a>
<a href=/tags/ddd>#ddd</a>
<a href=/tags/routing>#routing</a>
<a href=/tags/symfony>#symfony</a></p><a style=margin-bottom:24px;display:inline-block class=shareBtn onclick=openFediInstanceDialog()>Share on the Fediverse</a><div id=fediInstanceDialog><div class=bg onclick=closeFediInstanceDialog()></div><div class=dialog><h2>Enter your instance's address</h2><input id=fediInstanceInput placeholder='Eg. mastodon.social' type=text><div class=buttons><a class=shareBtn onclick=closeFediInstanceDialog()>Cancel</a>
<a class=shareBtn onclick=shareOnFedi()>Share</a></div></div></div><script>var articleTitle="Dynamic Route loading in a non standard Symfony structure",articleLink="https://blog.dazzlog.de/posts/2024-08-16_dynamic-route-loading-symfony/",fediInstanceDialog=document.getElementById("fediInstanceDialog"),fediInstanceInput=document.getElementById("fediInstanceInput");function openFediInstanceDialog(){fediInstanceDialog.classList.add("open")}function closeFediInstanceDialog(){fediInstanceDialog.classList.remove("open")}function fixURL(e){return e.substr(0,8)=="https://"?e:e.substr(0,7)=="http://"?e:"https://"+e}function shareOnFedi(){let e=fediInstanceInput.value.trim();if(!e)return;e=fixURL(e),window.open(`${e}/share?text=${articleTitle}%20${articleLink}`,"__blank"),closeFediInstanceDialog()}</script><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script><div id=ficurinia-cactus-comments></div><script>initComments({node:document.getElementById("ficurinia-cactus-comments"),defaultHomeserverUrl:"https://matrix.cactus.chat:8448",serverName:"cactus.chat",siteName:"dazzlog",commentSectionId:"75a76c8aa4aa8140703195f4763dc8ca"})</script><div class=relatedArticlesContainer><hr><h2>More posts like this</h2><div class=postlist><article class="card postlistitem"><div><h2><a href=https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony/>Environment variables in a dockerized Symfony</a></h2><p class=date><span title=Date> </span>2023-01-02
|
<span title=Tags> </span><a href=/tags/cd>#cd</a>
<a href=/tags/ci>#ci</a>
<a href=/tags/docker>#docker</a>
<a href=/tags/docker-compose>#docker-compose</a>
<a href=/tags/dotenv>#dotenv</a>
<a href=/tags/env_file>#env_file</a>
<a href=/tags/symfony>#symfony</a></p><a class=unstyledLink href=https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony/><img src=https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony//amy-humphries-2M_sDJ_agvs-unsplash.jpg alt></a><div class=articlePreview><p>I have developed a Symfony Web-Application, and it runs locally in a dockerized environment with docker-compose. This app is going to be deployed to production as a docker container. In production the handling of environment variables and how they are passed to the container during development is different.
12 Factor App A few points from the 12factor methodology:
III. Config: Store config in the environment since env vars are easy to change between deploys without changing any code X.</p><p><a href=https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony/>Continue reading </a></p></div></div><hr></article><article class="card postlistitem"><div><h2><a href=https://blog.dazzlog.de/about/>about</a></h2><p class=date><span title=Date> </span>0001-01-01
|
<span title=Tags> </span><a href=/tags/berlin>#berlin</a>
<a href=/tags/dazz>#dazz</a>
<a href=/tags/symfony>#symfony</a></p><div class=articlePreview><p>I love programming and most parts of it is trying to figure out how things can be used to make the life easier for everyone.
Symfony is making my life easier since 2012, and I&rsquo;m now the organizer of the Symfony Usergroup Berlin.
I&rsquo;m member of c-base the crashed space station in berlin and there I experiment with all the other carbon based beings how to interact in a future compatible style.</p><p><a href=https://blog.dazzlog.de/about/>Continue reading </a></p></div></div><hr></article></div></div></main><footer><hr><div class=footerColumns><ul class=notlist><li><strong>this.site</strong></li><li><a target=_blank href=/about>about</a></li><li><a target=_blank href=/impressum>impressum</a></li></ul><ul class=notlist><li><strong>self.dazz</strong></li><li><a target=_blank href=https://github.com/dazz>my GitHub</a></li><li><a target=_blank href=https://medium.com/@dazs>on Medium</a></li></ul><ul class=notlist><li><strong>here.links</strong></li><li><a target=_blank href=https://c-base.org>c-base</a></li></ul></div><p><small>2024 &copy; dazz - <a href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>.</small></p><p><small><a href=https://gitlab.com/gabmus/hugo-ficurinia>Ficurinia theme</a> for <a href=https://gohugo.io>Hugo</a> by <a href=https://gabmus.org>Gabriele Musco</a>. Licensed under <a href=https://www.gnu.org/licenses/agpl-3.0.html>GNU AGPLv3</a>.</small></p></footer></div></div></div></body></html>