<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet href="/feed_style.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="https://www.rssboard.org/media-rss"><channel><title>DazzLog</title><link>https://blog.dazzlog.de/</link><description>Recent content on DazzLog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>dazz - [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/).</copyright><lastBuildDate>Sat, 17 Jan 2026 09:00:00 +0200</lastBuildDate><atom:link href="https://blog.dazzlog.de/index.xml" rel="self" type="application/rss+xml"/><icon>https://blog.dazzlog.de/logo.svg</icon><item><title>I Thought I Needed Better Prompts. I Needed a System.</title><link>https://blog.dazzlog.de/posts/2026-01-17_application-layer-ai-engineering/</link><pubDate>Sat, 17 Jan 2026 09:00:00 +0200</pubDate><guid>https://blog.dazzlog.de/posts/2026-01-17_application-layer-ai-engineering/</guid><description><![CDATA[<p>I don&rsquo;t learn well from videos. Too much friction—pausing, rewinding, hunting for that one command buried in a 45-minute timeline. Last summer, I decided to build my way out of it.</p>
<h3 id="the-initial-win">The Initial Win</h3>
<p>The plan was straightforward: feed video transcripts to an AI, extract clean Markdown, commit to Git. Not even a proper application—just something I could consume via RSS instead of watching videos.</p>
<p>The first results were surprisingly good. The AI captured structure and nuance well enough that I kept going. For a brief moment, it felt like I&rsquo;d solved the problem.</p>
<p>Then came the real work.</p>
<h3 id="when-manual-steps-became-the-bottleneck">When Manual Steps Became the Bottleneck</h3>
<p>The AI quality wasn&rsquo;t the issue. Everything <em>around</em> it was.</p>
<p>I was trapped in a loop: copy-paste transcripts, update video IDs in a Makefile, trigger Python scripts, verify output, repeat. The actual AI call represented only a fraction of the effort. The rest was me playing human cron job.</p>
<p>As content accumulated, the Markdown files became unmanageable. No cross-file search. No metadata. No deduplication. The moment I needed to ask &ldquo;which video mentioned this specific technique?&rdquo; the whole approach collapsed.</p>
<p>A database wasn&rsquo;t a feature. It was the structural requirement I&rsquo;d been avoiding.</p>
<h3 id="from-script-to-system">From Script to System</h3>
<p>I didn&rsquo;t need better scripts. I needed something that could discover content, process it, store it, and make it queryable—without manual intervention at every step.</p>
<p>This forced me to think about maintainability and evaluation. I moved the entire project to <strong>PHP and Symfony</strong>. Not because it&rsquo;s trendy in AI circles (it&rsquo;s not), but because I needed to build something I could maintain, debug, and reason about six months later. When Symfony released their AI packages, the orchestration layer finally made sense.</p>
<p>PostgreSQL with pgvector for embeddings and Neo4j for knowledge graphs. Everything in an environment designed for long-term stability.</p>
<div class="details admonition symfony open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xe756;</i> symfony/ai<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>Symfony AI is a set of components that integrate AI capabilities into PHP applications, providing a unified interface to work with various AI platforms like OpenAI, Anthropic, Google Gemini, Azure, and more.</p>
<p>See <a href="https://symfony.com/doc/current/ai/index.html">https://symfony.com/doc/current/ai/index.html</a></p>
</div>
  </div>
</div>
<h3 id="engineering-over-magic">Engineering Over Magic</h3>
<p>Here&rsquo;s what became clear: &ldquo;knowledge extraction&rdquo; sounds like a single AI task. It&rsquo;s not. It&rsquo;s a pipeline with distinct stages:</p>
<ol>
<li><strong>Gather</strong> – Fetch transcripts, manage metadata</li>
<li><strong>Normalize</strong> – Chunk at semantic boundaries, disfluency Removal</li>
<li><strong>Transform</strong> – Extract entities and relationships</li>
<li><strong>Store</strong> – Vectors and graphs</li>
<li><strong>Retrieve</strong> – Routed search methods</li>
</ol>
<p><strong>Most of these stages have nothing to do with AI.</strong></p>
<p>The breakthrough came when I stopped chasing the perfect prompt. I built a <strong>TranscriptChunker</strong> service that preserves timestamps and context. A <strong>triplet extraction pipeline</strong> that pulls structured relationships from text. An <strong>evaluation system</strong> to measure whether any of it actually works.</p>
<p>Chaining specific, isolated AI calls produces more reliable results than one massive &ldquo;do everything&rdquo; request. If your input data is messy or your pipeline logic is flawed, no amount of prompt engineering will save you.</p>
<h3 id="what-actually-matters">What Actually Matters</h3>
<p>AI fails silently and gracefully. Without proper evaluation, you can&rsquo;t tell the difference between &ldquo;looks good&rdquo; and &ldquo;actually works.&rdquo; Without tracing, you can&rsquo;t debug where extraction went wrong. Without structure, you have a demo, not a system.</p>
<p>The architecture surrounding the AI calls matters more than the calls themselves. Database schema design. Chunk boundary decisions. Metadata preservation. Error handling. These are application problems, and they&rsquo;re where most AI projects quietly fall apart.</p>
<p>I&rsquo;m still figuring out the optimal patterns. The industry&rsquo;s collective knowledge is scattered across blog posts, papers, and half-finished repos. But my focus has permanently shifted: less time optimizing individual prompts, more time building the system that makes those prompts repeatable, traceable, and maintainable.</p>
<p>That&rsquo;s the work that scales.</p>
]]></description><media:thumbnail url="https://blog.dazzlog.de/hero.png"/></item><item><title>Summer Projects 2025: 3 websites in 3 weeks</title><link>https://blog.dazzlog.de/posts/2025-08-17_summer-projects/</link><pubDate>Sun, 17 Aug 2025 09:00:00 +0200</pubDate><guid>https://blog.dazzlog.de/posts/2025-08-17_summer-projects/</guid><description><![CDATA[<blockquote>
<p>&ldquo;Three weeks, three websites — and yes, I actually took a proper holiday too.&rdquo;</p>
</blockquote>
<p>During my summer vacation 2025, I had a bit of time each evening to hack away at my computer. Since I&rsquo;d been wanting to tackle these projects for a while and felt motivated, I decided to take them on one after another. It wasn&rsquo;t originally planned as &ldquo;one per week&rdquo;, but that&rsquo;s the rhythm that naturally emerged from the time I had available, the pace of development, and how long each project actually took. I&rsquo;ll get to what these projects were in a moment, but what I found more important was my goal to develop a solid workflow with <strong>Claude Code</strong>.</p>
<p>I&rsquo;ve been exploring Claude Code for a few weeks now, and the topics you can research and discover with it are numerous.</p>
<h2 id="claude-code-features">Claude Code Features</h2>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Claude Code<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p><strong>Claude Code</strong> is an <strong>agentic coding tool</strong> from Anthropic that runs directly in your terminal, allowing you to efficiently delegate programming tasks using natural language — without any extra chat windows or IDE integration.</p>
<p>Link: <a href="https://docs.anthropic.com/en/docs/claude-code/">https://docs.anthropic.com/en/docs/claude-code/</a></p>
</div>
  </div>
</div>
<h3 id="slash-commands-commands">Slash Commands <code>/commands</code></h3>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Claude Code Slash Commands<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Custom slash commands allow you to define frequently-used prompts as Markdown files that Claude Code can execute. Commands are organized by scope (project-specific or personal) and support namespacing through directory structures.
Link: <a href="https://docs.anthropic.com/en/docs/claude-code/slash-commands">https://docs.anthropic.com/en/docs/claude-code/slash-commands</a></div>
  </div>
</div>
<p>The generate-command is my absolute favourite from my current collection, because it lets you create infinitely more and specialized commands.</p>
<p><code>.claude/commands/generate-command.md</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>allowed-tools: Read, Write, Bash(mkdir:*), Bash(pwd)
</span></span><span style="display:flex;"><span>description: Add a reusable slash command so anyone who clones your repo can invoke it with <span style="color:#f1fa8c">`/project:&lt;name&gt;`</span> inside the Claude Code CLI.
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">## Context  
</span></span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">-</span> Current directory: !<span style="color:#f1fa8c">`pwd`</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">-</span> Current date: !<span style="color:#f1fa8c">`date +%Y-%m-%d`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">## Usage
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f1fa8c">```
</span></span></span><span style="display:flex;"><span>/generate-command Analyze content for SEO optimization opportunities across the blog
</span></span><span style="display:flex;"><span><span style="color:#f1fa8c">```</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p><strong>Examples of commands for my technical blog</strong></p>
<ul>
<li>audit-reading-time.md</li>
<li>audit-seo.md</li>
<li>post-scaffold.md</li>
<li>posts-validate-content.md</li>
<li>team-add-member.md</li>
</ul>
<p>Sometimes you don&rsquo;t even realize what you could automate, but when you work on a project for a while and start bundling work steps into commands, you notice more and more things that can be automated through commands.</p>
<h3 id="subagents-agents">Subagents <code>/agents</code></h3>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Claude Code Subagents<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>Subagents are preconfigured AI personalities that Claude Code can delegate tasks to. Each subagent operates in its own context, preventing contamination of the main conversation and keeping it focused on high-level goals.</p>
<p>Link: <a href="https://docs.anthropic.com/en/docs/claude-code/sub-agents">https://docs.anthropic.com/en/docs/claude-code/sub-agents</a></p>
</div>
  </div>
</div>
<ul>
<li>Project level: <code>.claude/agents/</code></li>
<li>User level: <code>~/.claude/agents/</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>name: subagent-name
</span></span><span style="display:flex;"><span>description: Description of when this subagent should be called
</span></span><span style="display:flex;"><span>tools: tool1, tool2, tool3  # Optional
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>Your system prompt for the subagent...
</span></span></code></pre></div><p>When you have an idea for a subagent, you can have Claude generate one for you using <code>/agent</code>, which will then be stored in <code>.claude/agents/</code>.</p>
<h3 id="background-jobs-bashes">Background jobs <code>/bashes</code></h3>
<p>Claude Code can also run background jobs that aren&rsquo;t directly connected to the current conversation. This is practical for development with a static site generator, as you can have Claude monitor the build process logs and react directly when errors occur.</p>
<h2 id="why-zola">Why Zola?</h2>
<p>I wanted to create a technical blog. Previously my blog ran on Jekyll, now on Hugo, but I wanted to see what was currently popular before just defaulting to Hugo. The decision really came down to Hugo or Zola, but then I noticed that Zola uses Jinja2-like syntax for templates. I know Jinja2-style syntax from the Symfony world as Twig, and I can understand it easily — plus anyone who might want to extend the blog in the future (my colleagues also know Twig) can understand it too. That was an important decision criterion for me.</p>
<p>Static site generation means the website is generated upfront and then served as static HTML files. This has performance and security advantages since no database queries or server-side logic are needed. GitHub has been offering GitHub Pages for this for years, and it&rsquo;s incredibly simple to host a static website.</p>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Zola<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>Zola is a static site generator (SSG), similar to Hugo, Pelican, and Jekyll. It is written in Rust and uses the Tera template engine, which is similar to Jinja2, Django templates, Liquid, and Twig.</p>
<p>Link: <a href="https://www.getzola.org/">https://www.getzola.org/</a></p>
</div>
  </div>
</div>
<h2 id="project-1-technical-blog-for-open-software-consulting">Project 1: Technical Blog for OPEN Software Consulting</h2>
<div class="details admonition bug open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf188;</i> not online yet<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">This page needs to be discussed with some decision makers before it gets deployed. Stay tuned.</div>
  </div>
</div>
<p><img src="open-sc-tech-blog.jpg" alt="open-sc-tech-blog.jpg" title="OPEN Software Consulting Tech Blog"></p>
<p>Since there was no technical blog before, I could start completely fresh without any legacy concerns. I wasn&rsquo;t familiar with Zola yet and how it works, so I decided after a bit of research on the <strong>DeepThought</strong> theme, which I liked and also provided a good foundation for OPEN Software Consulting&rsquo;s corporate identity.</p>
<p>I gave Claude the brand colors and that&rsquo;s how the current design of the site emerged. My workflow with Claude Code involved creating a <code>PLAN.md</code> file where I listed all the tasks I wanted to complete. I then kept updating this file and prompted Claude to take a task from the file, work on it, read the file (in case it had changed), check it off, commit, and then take the next task. This helped me keep track of everything and also document the work steps.</p>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> DeepThought<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>A simple blog theme focused on writing powered by Bulma and Zola</p>
<p>Link: <a href="https://deepthought-theme.netlify.app/">https://deepthought-theme.netlify.app/</a></p>
</div>
  </div>
</div>
<h3 id="reading-time">Reading Time</h3>
<p>Something I hadn&rsquo;t thought of at all was reading time for blog posts. This is a feature Claude suggested and I really like it. Claude helped me calculate the reading time for each blog post and store it in the frontmatter. This was super practical because I could then display the reading time directly in the blog posts. There&rsquo;s now also a Claude Code command <code>/project:audit-reading-time</code> that calculates reading time for all blog posts and stores it in the frontmatter.</p>
<h3 id="teamauthors">Team/Authors</h3>
<p>Since I created the site for OPEN Software Consulting, I also wanted to include team members as authors. For this, I created a <code>/project:team-add-member</code> command that allows me to add team members and create their profiles. This is super practical because I can easily manage team members and update their profiles. Under <code>/team/</code> you can find the team members and their profiles, which I created with Claude Code. Each author also has a list of their blog posts that they&rsquo;ve written.</p>
<h3 id="events">Events</h3>
<p>I also wanted to include the Symfony User Group events that we&rsquo;ve been organizing for years. For this, I created a <code>/project:events-add-event</code> command that allows me to add events and manage their details. The events are displayed under <code>/events/</code> and are organized in the same structure as blog posts. This makes it easy to manage events and display them on the website.</p>
<h3 id="taxonomies">Taxonomies</h3>
<p>I learned these are super important for structuring content. I created taxonomies for authors, categories, and tags to better organize the blog posts. Zola does a fantastic job making tags, categories, and authors easily browsable.</p>
<h3 id="search">Search</h3>
<p>Zola has a built-in search function that I activated for the blog. This is super practical because readers can quickly find the content they&rsquo;re looking for. I also created a <code>/project:posts-validate-content</code> command that ensures all blog posts are correctly formatted and contain no errors.</p>
<h3 id="additional-features">Additional Features</h3>
<ul>
<li><strong>Cookie Banner</strong>: Implemented to comply with privacy regulations.</li>
<li><strong>Admonition Macro</strong>: For special notices in blog posts.</li>
<li><strong>Responsive Design</strong>: The design is mobile-friendly and adapts to different screen sizes.</li>
<li><strong>Hero Images</strong>: Each blog post has a hero image defined in the frontmatter.</li>
<li><strong>Taxonomy Pages</strong>: Pages that display all blog posts and events by categories and tags.</li>
<li><strong>SEO Optimization</strong>: Blog posts are optimized for search engines to ensure better visibility.</li>
<li><strong>Accessibility</strong>: The website is designed to be accessible to all users.</li>
<li><strong>Performance Optimization</strong>: The website is fast and responsive since it&rsquo;s statically generated.</li>
<li><strong>Deployment</strong>: The website is automatically deployed to GitHub Pages when code changes are made.</li>
<li><strong>Content Validation</strong>: A command that ensures all content is correctly formatted and contains no errors.</li>
<li><strong>Markdown Support</strong>: All content is written in Markdown, making editing and maintenance easier.</li>
<li><strong>Syntax Highlighting</strong>: Code snippets in blog posts are automatically highlighted to improve readability (without line numbers).</li>
<li><strong>Table of Contents (ToC)</strong>: Automatically generated table of contents for blog posts that enable better navigation.</li>
</ul>
<h3 id="summary">Summary</h3>
<p>I was amazed that I was done with the site after 5 days. And that&rsquo;s even though I only had a few hours each evening to work on it. I learned a lot about Zola and how taxonomies work. I also learned how easy it is with Claude Code to quickly get a simple project up and running. I hadn&rsquo;t known <strong>Bulma CSS</strong> before, but it&rsquo;s a lightweight CSS framework that works well with Zola and helped me quickly create an appealing design.</p>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Bulma &#xf08a;<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>Bulma is a free, open source, modern, lightweight, CSS-only framework that provides ready-to-use frontend components, based on Flexbox for fast, responsive layouts with simple class names and no JavaScript.</p>
<p>Link: <a href="https://bulma.io/">https://bulma.io/</a></p>
</div>
  </div>
</div>
<p>In four days, this project went from zero to:</p>
<ul>
<li><strong>67 commits</strong> (averaging 16 commits per day)</li>
<li><strong>2 blog posts</strong> with comprehensive content</li>
<li><strong>5 event pages</strong> with real community data</li>
<li><strong>1 team member profile</strong> with avatar and expertise (mine)</li>
<li><strong>Complete taxonomy system</strong> for content organization</li>
<li><strong>Advanced UI components</strong> including admonitions and TOC</li>
</ul>
<h2 id="project-2-c-base-artefakt-guide">Project 2: c-base Artefakt-Guide</h2>
<p>The c-base artifact guide is a guide to the discovered artifacts of c-base for members of <strong>c-base, the crashed space station under Berlin-Mitte</strong>. The relaunch was necessary because the old website was outdated and no longer met requirements. The connection to c-base&rsquo;s LDAP system no longer worked and the PHP libraries were so outdated that they could no longer be updated. A website relaunch I had planned was <strong>not completed twice</strong>, so I decided to recreate the website with Zola.</p>
<p>What&rsquo;s missing now is the editing functionality for members, but I consider that a feature that can be added later. The website is now static and maintained by c-base members by updating the Markdown files in the repository. I did a bit of research - there are even UIs for sites stored in Git that allow content editing, but I decided not to set that up for now because it makes things technically more complex again and the project should first be relaunched in a simple version. One challenge is that the URLs must remain the same, since we have QR codes hanging on board that scan to the artifact guide for specific artifacts.</p>
<p>This time too, I created an initial document with Claude Code where I described in great detail what I wanted to do. The goal, current status, and desired end state. I already knew I wanted to use Zola, but for this project the layout was so specific that a ready-made theme would have mostly gotten in the way. After brief research, I decided on a custom theme. With <strong>TailwindCSS and DaisyUI</strong>, because both are on my list of things I want to gain experience with. This would later give me headaches and delay the project.</p>
<p>One requirement I set for every project is that they don&rsquo;t depend on any external sources in production. No CDNs for fonts, CSS, or JavaScript libraries. All resources are delivered statically with the site. But I still started with TailwindCSS delivered via CDN and postponed the problem of not finding a proper way to include it until later.</p>
<div class="details admonition failure open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf057;</i> TailwindCSS needs npm or CDN<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Tailwind needs a JavaScript (npm) build step to parse existing CSS for used classes and save them in a CSS file. Either the JavaScript comes via CDN that parses my site at runtime (and tracks all users), or I install npm and the JavaScript libraries to parse locally.</div>
  </div>
</div>
<p>For me, this mainly means that TailwindCSS becomes unusable, because:</p>
<ol>
<li>My deploy process should be as simple as possible</li>
<li>npm is hell and I won&rsquo;t voluntarily let it into my house. It opens a dependency hell that becomes outdated and opens security vulnerabilities as soon as you don&rsquo;t update for 5 minutes.</li>
<li>End of story.</li>
</ol>
<p>All the layout had to be recreated from scratch. Once that was clear, I gave Claude the task of migrating the existing layout to Bulma (which we already know). That took a few minutes until everything fit, and I had to help out quite a bit, and after running into the usage limit at least twice, the layout was sleek, I liked it, and it wasn&rsquo;t dependent on anything or anyone anymore.</p>
<p><img src="c-base-artefakt-guide.jpg" alt="c-base-artefakt-guide.jpg" title="c-base Artefakt Guide, c_o:n, oder?"></p>
<p>This project contains a long list of features:</p>
<h3 id="multilingual-with-c-lang">Multilingual with c-lang</h3>
<div class="details admonition tldr open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf259;</i> c-lang<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">c-lang is the constructed language of the c-base space station. The escalation system (0-3) provides increasing complexity from basic member communication to advanced c-lang usage.</div>
  </div>
</div>
<p>Since c-lang isn&rsquo;t ISO standard, normal multilingual features can&rsquo;t handle it, and it took a while until I found an approach that wasn&rsquo;t cumbersome, didn&rsquo;t require writing markup in Markdown, or put all texts in the TOML configuration. Since most multilingual features change the URL per language, that wasn&rsquo;t an option, because the URL had to be fixed due to the QR codes pointing to them.</p>
<p>So now it&rsquo;s solved by having a separate file for each language and making the switch in the template. The main configuration is done in the default language, German and English only adjust the title.</p>
<h3 id="taxonomy-for-decc-location-and-ring">Taxonomy for <code>decc</code>, <code>location</code> and <code>ring</code></h3>
<p>Now you can browse the list of artifacts from the <code>oberdecc</code> or the <code>culture</code> ring. This also generates the next artifact that invites further browsing.</p>
<h3 id="image-credits-and-image-carousel">Image Credits and Image Carousel</h3>
<p>Image credits are preserved. The images were previously stored in a database and linked to artifacts with an n:m relation. Without a database, this now becomes denormalized into a 1:n relation: Each artifact has many images. The images are entered in the article&rsquo;s TOML config. The number of images determines whether a carousel is shown or just the image without control elements and pagination.</p>
<p><img src="c-base-artefakt-guide_artefact.jpg" alt="c-base-artefakt-guide_artefact.jpg"></p>
<h3 id="deployment">Deployment</h3>
<p>The project is packaged into a Docker image via GitHub Actions and pushed to GitHub&rsquo;s Container Registry tagged as latest. Then a webhook is called that ensures a script on a c-base server pulls
the image and starts a container from it. Wasn&rsquo;t a problem at all, but something new to learn from GitHub.</p>
<h3 id="summary-1">Summary</h3>
<p>I would have liked to avoid the TailwindCSS route, but I&rsquo;m glad I went through it because now I don&rsquo;t have to make the same journey in my project at work and already know that Bulma is the alternative.</p>
<p>Claude helped with:</p>
<ul>
<li>Creating the custom layout, twice</li>
<li>The trilingual language switch without ready-made language features</li>
<li>Content migration of existing artifacts and their images</li>
<li>Scripts and commands to check:
<ul>
<li>Valid frontmatter</li>
<li>Valid taxonomies</li>
<li>All registered images are present and all existing images are registered</li>
<li>All links work</li>
<li>All translations are present</li>
</ul>
</li>
<li>Detailed documentation</li>
<li>CI/CD with GitHub Actions</li>
</ul>
<p>The project was super fun and quite a bit more time needs to be invested to claim the artifact guide is finished, because with this project, content is king. The site is a feast for the eyes and does justice to the space station. A good moment for a relaunch, because the space station turns 30 this year!</p>
<div class="details admonition tldr open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf259;</i> c-base<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">c-base celebrates its 30th orbit around the sun on Earth this year.</div>
  </div>
</div>
<p>In 6 days, this project went from zero to:</p>
<ul>
<li><strong>64 commits</strong> (averaging 10 commits per day)</li>
<li><strong>92 c-base artifacts</strong> with complete metadata and imagery</li>
<li><strong>279 multilingual content files</strong> across c-lang, German, and English</li>
<li><strong>106 artifact images</strong> co-located with content for optimal organization</li>
<li><strong>3 complete language versions</strong> with client-side switching for QR-code compatibility</li>
<li><strong>7 comprehensive validation scripts</strong> ensuring content quality and consistency</li>
<li><strong>1,596 lines of custom Zola templates</strong> built from scratch for authentic c-base styling</li>
<li><strong>Complete taxonomy system</strong> covering decc classification, station locations, and ring mapping</li>
<li><strong>Full Docker deployment</strong> pipeline with multi-stage builds and nginx configuration</li>
<li><strong>Advanced search functionality</strong> across all languages and artifact metadata</li>
<li><strong>Production-ready static site</strong> serving authentic c-base space station culture</li>
</ul>
<h2 id="project-3-relaunch-berliner-php-usergroup-website">Project 3: Relaunch Berliner PHP Usergroup Website</h2>
<p>The Berlin PHP User Group site was created in 2011, before that it was a wiki (?). <strong>Jekyll</strong> was used, which was state-of-the-art at the time. The site has, as mentioned, gotten long in the tooth and I had no desire to maintain an old site after taking over the organization of the Berlin PHP Usergroup.</p>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Jekyll<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><p>Jekyll is a static site generator. It takes text written in your favorite markup language and uses layouts to create a static website. It&rsquo;s written in Ruby and was one of the first SSGs that you could use with GitHub Pages.</p>
<p>Link: <a href="https://jekyllrb.com/">https://jekyllrb.com/</a></p>
</div>
  </div>
</div>
<p>I analyzed the content of the old site and found that it would be better to represent the &ldquo;&ldquo;Archive&rdquo; as the list of events, which is what the usergroup is all about, since a Markdown page was diligently created each time. Many events also include slides and source files that speakers had uploaded. I wasn&rsquo;t sure at first whether we should keep them, but after seeing that it was under 100MB, the question was off the table and the answer was a clear &ldquo;Yes!&rdquo;</p>
<p>Together with Claude, I created a spec until everything I envisioned was correctly listed:</p>
<ol>
<li>Zola SSG with custom theme using Bulma CSS</li>
<li>PHP colors</li>
<li>Landing page</li>
<li>List of all events</li>
<li>Taxonomy for speakers and topics</li>
</ol>
<p>I first imported one event, checked that everything fit, then we imported 5 more events from the old repository and more adjustments had to be made. Then I had to take a break for the day because
I hit Claude&rsquo;s token limit. After that I just had Claude to its thing importing all events and deciding on the topics for each event. I would never have tried to do this if it wasn&rsquo;t for a helping
hand from AI.</p>
<p><img src="bephpug_relaunch_2.jpg" alt="bephpug_relaunch_2.jpg"></p>
<h3 id="events-1">Events</h3>
<p>Thanks to the simple structure, you can now easily view all past events and browse the topics and speakers for each event.</p>
<p><img src="bephpug_relaunch_events.jpg" alt="bephpug_relaunch_events.jpg"></p>
<h3 id="speaker">Speaker</h3>
<p>Each speaker has their own page listing all events where they gave a presentation.
<img src="bephpug_relaunch_speaker.jpg" alt="bephpug_relaunch_speaker.jpg"></p>
<h3 id="list-of-all-speakers">List of All Speakers</h3>
<p>In the overview of all speakers, speakers are sorted so that those with the most talks are listed at the top.
<img src="bephpug_relaunch_speakers.jpg" alt="bephpug_relaunch_speakers.jpg"></p>
<h3 id="summary-2">Summary</h3>
<p>I&rsquo;m excited that with the new site there&rsquo;s now a way to browse the long history of the Berlin PHP Usergroup. I thought it was cool to see the numbers:</p>
<div class="details admonition php open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xe73d;</i> Berlin PHP Usergroup<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><ul>
<li>~13 years</li>
<li>98 meetups</li>
<li>103 speakers</li>
</ul>
<p>Link: <a href="https://bephpug.de/">https://bephpug.de/</a></p></div>
  </div>
</div>
<p>That really motivates me!</p>
<p>The project evolved from initial setup to a fully functional community website with automated deployment in just 4 days</p>
<ul>
<li><strong>14 commits</strong> across 4 development days</li>
<li><strong>Complete</strong> static site generator migration from Jekyll to Zola</li>
<li><strong>Complete website redesign</strong> with Bulma CSS</li>
<li><strong>Events system</strong> with modern styling and navigation</li>
<li><strong>SEO-friendly URL structure</strong> for all events</li>
<li><strong>Historical event archive</strong> with 98 migrated events</li>
<li><strong>Modern taxonomy system</strong> for speakers and topics</li>
<li><strong>Production deployment</strong> pipeline with GitHub Actions</li>
</ul>
<h2 id="what-i-learned-from-all-3-projects">What I Learned from all 3 projects</h2>
<p><strong>Why &ldquo;staying out of the way&rdquo; is an underestimated feature:</strong>
Zola&rsquo;s simplicity meant I spent time solving actual problems rather than fighting the tool. When technology doesn&rsquo;t create friction, you can focus on what matters - the content and user experience.</p>
<p><strong>Bare minimum first:</strong>
There are a ton of features that can be added, but they all make the project more complex and introduce possible bugs. Keeping it simple and doing only the bare minimum to have the project
shippable was a fun achievement.</p>
<p><strong>How different projects help you really understand a tool:</strong>
Each project pushed different boundaries:</p>
<ul>
<li>Project 1 taught me Zola basics and taxonomies</li>
<li>Project 2 forced me into custom themes and multilingual complexity</li>
<li>Project 3 showed me content migration and community site patterns</li>
</ul>
<p><strong>Tips for other developers wanting to start with Zola:</strong></p>
<ul>
<li>Start with an existing theme for your first project to understand the patterns</li>
<li>Embrace the simplicity - don&rsquo;t over-engineer from the start</li>
<li>Use taxonomies liberally - they&rsquo;re powerful for content organization</li>
<li>Co-locate assets with content when possible</li>
<li>The template system is intuitive if you know Jinja2/Twig</li>
</ul>
<h2 id="summary--outlook">Summary &amp; Outlook</h2>
<p><strong>Quick retrospective: 3 websites – check.</strong></p>
<p><strong>Key insight: A good tool is one that allows you to implement your ideas quickly.</strong></p>
<p>Three weeks of evening development resulted in three production (ready) websites, each serving real communities and solving actual problems. The combination of Claude Code&rsquo;s intelligent assistance with Zola&rsquo;s straightforward architecture created a development experience that felt more like guided conversation than traditional programming.</p>
<p>The pattern that emerged wasn&rsquo;t planned but proved effective: detailed planning documents, iterative development with AI assistance, and focus on shipping functional solutions over perfect implementations. Sometimes the best workflow is the one that naturally evolves from the constraints you&rsquo;re working within.</p>
]]></description><media:thumbnail url="https://blog.dazzlog.de/hero.png"/></item><item><title>Mastering Multi-Process Containers: Running PHP Applications with s6-overlay</title><link>https://blog.dazzlog.de/posts/2025-03-26_running-php-in-a-multi-process-container/</link><pubDate>Wed, 26 Mar 2025 20:42:23 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2025-03-26_running-php-in-a-multi-process-container/</guid><description><![CDATA[<h2 id="the-dockerized-development-setup">The Dockerized Development Setup</h2>
<p>Containerization has completely changed how we build and deploy PHP applications. With Docker, you can make sure that your production environment behaves just like your local setup, which means fewer surprises when you go live.</p>
<p>In this post, we&rsquo;re diving into running Symfony in a container that runs multiple processes using s6-overlay. We&rsquo;ll explain why having more than one process in a container can be important, how this idea is different from Docker&rsquo;s usual “one process per container” rule, and how s6-overlay makes it easier to run everything together.</p>
<p>Whether you&rsquo;re new to s6-overlay or looking to improve your container setup, this guide walks you through practical, step-by-step tips to help you run your Symfony apps more smoothly. Enjoy discovering a simpler, more flexible way to work with containers!</p>
<h2 id="why-two-containers">Why Two Containers?</h2>
<p>Typically, a dockerized PHP development environment consists of:</p>
<ul>
<li><strong>PHP-FPM Container:</strong> Runs the PHP application.</li>
<li><strong>NGINX Container:</strong> Serves static files and proxies requests to PHP-FPM.</li>
</ul>
<p>And the <code>docker-compose.yaml</code> looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#6272a4"># docker-compose.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">app</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">image</span>: php:8.4.1-fpm-alpine
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">volumes</span>:
</span></span><span style="display:flex;"><span>      - ./app:/var/www/html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">nginx</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">image</span>: nginx:latest
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f1fa8c">&#34;8000:80&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">volumes</span>:
</span></span><span style="display:flex;"><span>      - ./app/public:/var/www/html/public
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">depends_on</span>:
</span></span><span style="display:flex;"><span>      - app
</span></span></code></pre></div><p>This setup is common, it comes because of two primary reasons:</p>
<ul>
<li>
<p><strong>Lack of a Built-in Web Server:</strong><br>
PHP does not include a production-grade HTTP server. Unlike languages like Go or Ruby, PHP relies on external servers (NGINX/Apache) to manage HTTP requests.</p>
</li>
<li>
<p><strong>Docker’s “One Process per Container” Mantra:</strong><br>
Docker traditionally encourages running a single process per container. The reason for that I will explain a bit
further down. This leads to separate containers for each service, complicating inter-process communication and health
monitoring.</p>
</li>
</ul>
<div class="mermaid">
    
sequenceDiagram
    participant Client
    participant NGINX
    participant PHP-FPM

    Client->>NGINX: Send HTTP Request (e.g., /index.php)
    NGINX->>PHP-FPM: Forward Request via FastCGI
    PHP-FPM->>PHP-FPM: Process PHP Script
    PHP-FPM->>NGINX: Return Output (HTML, JSON, etc.)
    NGINX->>Client: Send HTTP Response

</div>

<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, theme: "dark" });
</script>
<h2 id="why-is-it-a-problem-running-two-containers">Why is it a problem running two containers?</h2>
<p>Running multiple containers isn&rsquo;t inherently problematic. Some hosting platforms limit multi-container deployments, pushing developers toward single-container solutions. But this isn&rsquo;t a technical limitation — it&rsquo;s often a constraint of hosting.</p>
<h3 id="build-time-dependency-between-containers">Build-time dependency between containers</h3>
<p>When your PHP application generates static assets that your webserver needs to serve, you&rsquo;re essentially creating a build-time dependency between containers. This isn&rsquo;t automatically bad, but it reveals potential architectural weaknesses.</p>
<p>The core problem isn&rsquo;t multiple containers—it&rsquo;s mixing concerns. Static assets should be treated as build artifacts, not runtime-generated content. Containers should be immutable; writing files during runtime contradicts container best practices.</p>
<h2 id="overcoming-the-one-process-per-container-constraint">Overcoming the One Process Per Container Constraint</h2>
<h3 id="understanding-container-isolation">Understanding Container Isolation</h3>
<div class="details admonition tldr open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf259;</i> tldr;<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">In Docker containers, the first process (PID 1) is responsible for handling system signals and managing child processes. If <code>PID 1</code> doesn&rsquo;t properly handle termination signals like <code>SIGTERM</code>, it can lead to issues such as zombie processes—completed processes that remain in the process table, potentially causing resource exhaustion.</div>
  </div>
</div>
<p>Containers provide isolation by encapsulating an application&rsquo;s filesystem, networking, and process tree. In Docker, the first process started within a container is assigned process ID 1 (<code>PID 1</code>). This process becomes the init process for the container, responsible for handling system signals and managing child processes.</p>
<p>Docker relies on sending signals like <code>SIGTERM</code> and <code>SIGKILL</code> to the container&rsquo;s <code>PID 1</code> to manage lifecycle events
such as stopping or restarting the container. However, if the process running as <code>PID 1</code> isn&rsquo;t designed to handle
these signals properly, it may not terminate gracefully upon receiving a termination signal. This can lead to issues like zombie processes — processes that have completed execution but still have an entry in the process table because their parent hasn&rsquo;t acknowledged their termination. Zombie processes can accumulate over time, leading to resource exhaustion and degraded system performance.</p>
<p>To mitigate these issues, it&rsquo;s important to ensure that the process running as <code>PID 1</code> in your container can handle system signals appropriately and manage child processes effectively. One approach is to use a minimal init system or an init-like process as <code>PID 1</code>. These init systems are designed to forward signals to child processes and reap zombie processes, ensuring proper process management within the container. For instance, using the exec command in shell scripts can replace the shell process with the intended application process, ensuring it becomes <code>PID 1</code> and can handle signals directly.</p>
<p>Alternatively, Docker provides the <code>--init</code> flag, which runs an init process as <code>PID 1</code>. This init process is responsible for forwarding signals and reaping zombie processes, thereby improving the container&rsquo;s process management.</p>
<p>By addressing the <code>PID 1</code> signal handling and zombie reaping issues, you can ensure that your containerized applications are more robust, responsive to lifecycle events, and free from resource leaks caused by lingering zombie processes.</p>
<div class="mermaid">
    
sequenceDiagram
    participant Host as Docker Host
    participant Container as Docker Container
    participant PID1 as PID 1 Process
    participant Child as Child Process

    Host->>Container: docker stop app
    Container->>PID1: SIGTERM
    alt PID1 handles SIGTERM
        PID1->>Child: Forward SIGTERM
        Child->>PID1: Termination Acknowledgment
        PID1->>Container: Exit
    else PID1 does not handle SIGTERM
        Note right of PID1: Child processes may become zombies
        Host->>Container: SIGKILL after timeout
        Container->>PID1: SIGKILL
        PID1->>Child: Terminate abruptly
    end

</div>

<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, theme: "dark" });
</script>
<p>What you see here is that when you execute the <code>docker stop</code> command, Docker initiates a graceful shutdown process
for the specified container. It first sends the <code>SIGTERM</code> signal to the main process inside the container, allowing the application to perform necessary cleanup operations. Docker then waits for a default grace period of 10 seconds. If the process does not terminate within this timeframe, Docker sends the <code>SIGKILL</code> signal to forcefully stop the container.</p>
<h3 id="the-role-of-s6-overlay">The Role of s6-overlay</h3>
<div class="details admonition abstract open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf15c;</i> s6-overlay<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><blockquote>
<p>s6-overlay is an easy-to-install (just extract a tarball or two!) set of scripts and utilities allowing you to use existing Docker images while using s6 as a pid 1 for your container and process supervisor for your services.</p>
</blockquote>
<p><a href="https://github.com/just-containers/s6-overlay">https://github.com/just-containers/s6-overlay</a></p>
</div>
  </div>
</div>
<ul>
<li><strong>Easy Integration:</strong> Seamlessly integrate S6-overlay into Docker images with a straightforward installation
process. Just extract a
tarball or two!</li>
<li><strong>Proper PID 1 functionality</strong>: It ensures that all child processes are managed and that signals are handled
gracefully. You&rsquo;ll never have zombie processes hanging around in your container, they will be properly cleaned up.</li>
<li><strong>Versatile Process Management:</strong> S6-overlay efficiently handles both one-time tasks and long-running processes,
making it versatile for containerized tasks.</li>
<li><strong>Dependency Control:</strong> Establish dependencies between processes to ensure orderly execution in complex application
stacks.</li>
<li><strong>Sequence Management:</strong> Control the start and stop sequence of processes, streamlining container operations.</li>
<li><strong>Environment Variable Templating:</strong> Easily customize process behavior with environment variables, adapting to
different environments.</li>
<li><strong>Log Management:</strong> Built-in log rotation simplifies log file management within container environments. the
supervision system
automatically maintains an open pipe between the producer&rsquo;s stdout and the logger&rsquo;s stdin.</li>
<li><strong>Graceful Shutdown:</strong> Ensure data integrity with graceful process shutdown and the ability to execute custom
scripts before container
shutdown.</li>
<li><strong>Multi-Arch Support:</strong> S6-overlay accommodates the diverse landscape of container <a href="https://platformengineers.io/services/infrastructure-maintenance-and-support">platforms with support</a> for multi-architecture container images.</li>
</ul>
<h2 id="setting-up-s6-overlay">Setting Up s6-overlay</h2>
<h3 id="installation">Installation</h3>
<p>The installation of s6-overlay is straightforward. In your Dockerfile, you typically add and extract two tarballs (one for noarch and one for your architecture). For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">busybox</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ARG</span> <span style="color:#8be9fd;font-style:italic">RELEASE_PATH</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://github.com/just-containers/s6-overlay/releases/download/v3.2.0.2&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ADD</span> <span style="color:#8be9fd;font-style:italic">$RELEASE_PATH</span>/s6-overlay-noarch.tar.xz /tmp
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">RUN</span> tar -C / -Jxpf /tmp/s6-overlay-noarch.tar.xz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ADD</span> <span style="color:#8be9fd;font-style:italic">$RELEASE_PATH</span>/s6-overlay-x86_64.tar.xz /tmp
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">RUN</span> tar -C / -Jxpf /tmp/s6-overlay-x86_64.tar.xz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ENTRYPOINT</span> [<span style="color:#f1fa8c">&#34;/init&#34;</span>]
</span></span></code></pre></div><p>Here, <code>/init</code> becomes the container’s entrypoint and will be responsible for process supervision.</p>
<p>(If you want to see a simpler setup jump to <a href="#s6-overlay-base-image">s6-overlay-base image</a>)</p>
<h3 id="basic-usage">Basic Usage</h3>
<p>With s6-overlay installed, your container’s command can be defined in two ways:</p>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Using ENTRYPOINT with `/init`<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">This enables s6-overlay to take over process supervision right from startup.</div>
  </div>
</div>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> Using `CMD` for your Application<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">You can set your command (e.g., running PHP scripts) with CMD. This allows you to override the default behavior while still benefiting from s6-overlay’s supervision.</div>
  </div>
</div>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">ENTRYPOINT</span> [<span style="color:#f1fa8c">&#34;/init&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">CMD</span> [<span style="color:#f1fa8c">&#34;php&#34;</span>, <span style="color:#f1fa8c">&#34;bin/console&#34;</span>, <span style="color:#f1fa8c">&#34;messenger:consume&#34;</span>, <span style="color:#f1fa8c">&#34;scheduler_default&#34;</span>, <span style="color:#f1fa8c">&#34;--time-limit=300&#34;</span>]
</span></span></code></pre></div><p>In this configuration, even if you override the command, s6-overlay will continue to manage your process lifecycle.</p>
<h2 id="service-types-in-s6-overlay">Service Types in s6-overlay</h2>
<p>s6-overlay supports three service types that let you control how processes run within your container:</p>
<ol>
<li><strong>Oneshot</strong>: Runs once and exits (e.g., initialization tasks).</li>
<li><strong>Longrun</strong>: Supervised by s6 (e.g., NGINX or PHP-FPM).</li>
<li><strong>Bundle</strong>: Groups related services together.</li>
</ol>
<p>Let&rsquo;s look into all of them next:</p>
<h3 id="1-oneshot">1. Oneshot</h3>
<ul>
<li><strong>Purpose:</strong> Run a task once (e.g., initialization or migration scripts).</li>
<li><strong>Configuration Files:</strong>
<ul>
<li><code>type</code> (contains “oneshot”)</li>
<li><code>up</code> (path to the script)</li>
</ul>
</li>
<li><strong>Behavior:</strong> The service runs, completes its task, and then exits.</li>
</ul>
<h3 id="2-longrun">2. Longrun</h3>
<ul>
<li><strong>Purpose:</strong> Manage long-running processes (daemons such as PHP-FPM or NGINX).</li>
<li><strong>Configuration Files:</strong>
<ul>
<li><code>type</code> (contains “longrun”)</li>
<li><code>run</code> (executable command/script)</li>
</ul>
</li>
<li><strong>Behavior:</strong> s6-overlay supervises these processes and automatically restarts them if they exit unexpectedly.</li>
</ul>
<h3 id="3-bundle">3. Bundle</h3>
<ul>
<li><strong>Purpose:</strong> Group related services so they can be started or stopped together.</li>
<li><strong>Configuration Files:</strong>
<ul>
<li><code>type</code> (contains “bundle”)</li>
<li><code>contents.d</code> (directory listing the grouped services)</li>
</ul>
</li>
<li><strong>Behavior:</strong> Bundles allow you to manage multiple services as a single unit.</li>
</ul>
<h2 id="a-step-by-step-example-running-php-fpm-and-nginx">A Step-by-Step Example: Running PHP-FPM and NGINX</h2>
<h3 id="1-directory-structure">1. Directory Structure</h3>
<p>Create the service root directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir -p /etc/s6-overlay/s6-rc.d
</span></span></code></pre></div><p>Then add the <code>user</code> bundle, which s6-overlay expects and uses as the entry point for all service configurations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>└── user
</span></span><span style="display:flex;"><span>    ├── contents.d <span style="color:#6272a4"># Directory for service files</span>
</span></span><span style="display:flex;"><span>    └── <span style="color:#8be9fd;font-style:italic">type</span>  <span style="color:#6272a4"># File contains string &#34;bundle&#34;</span>
</span></span></code></pre></div><h3 id="2-defining-the-php-fpm-service">2. Defining the PHP-FPM Service</h3>
<p>Create the PHP-FPM service configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── svc-php-fpm
</span></span><span style="display:flex;"><span>│   ├── run
</span></span><span style="display:flex;"><span>│   └── <span style="color:#8be9fd;font-style:italic">type</span>  <span style="color:#6272a4"># Contains &#34;longrun&#34;</span>
</span></span><span style="display:flex;"><span>└── user
</span></span><span style="display:flex;"><span>    └── contents.d
</span></span><span style="display:flex;"><span>        └── svc-php-fpm
</span></span></code></pre></div><p>And in <code>/etc/s6-overlay/s6-rc.d/svc-php-fpm/run</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/execlineb -P
</span></span></span><span style="display:flex;"><span>/usr/local/sbin/php-fpm --nodaemonize
</span></span></code></pre></div><h3 id="3-defining-the-nginx-service">3. Defining the NGINX Service</h3>
<p>Set up the NGINX service with a dependency on PHP-FPM:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── svc-nginx
</span></span><span style="display:flex;"><span>│   ├── dependencies.d
</span></span><span style="display:flex;"><span>│   │   └── svc-php-fpm
</span></span><span style="display:flex;"><span>│   ├── run
</span></span><span style="display:flex;"><span>│   └── <span style="color:#8be9fd;font-style:italic">type</span>  <span style="color:#6272a4"># Contains &#34;longrun&#34;</span>
</span></span><span style="display:flex;"><span>└── user
</span></span><span style="display:flex;"><span>    └── contents.d
</span></span><span style="display:flex;"><span>        └── svc-nginx
</span></span></code></pre></div><p>And the content of <code>/etc/s6-overlay/s6-rc.d/svc-nginx/run</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/execlineb -P
</span></span></span><span style="display:flex;"><span>nginx -g <span style="color:#f1fa8c">&#34;daemon off;&#34;</span>
</span></span></code></pre></div><p>This ensures that NGINX only starts after PHP-FPM is running.</p>
<h3 id="4-running-the-container">4. Running the Container</h3>
<p>Once the configuration is in place, launch your container:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run --name s6-demo -d -p 8000:80 s6-demo
</span></span></code></pre></div><p>Use <code>docker stop</code> to gracefully shut down your container. s6-overlay will handle the shutdown by invoking any configured <code>finish</code> scripts to perform cleanup or adjust exit codes.</p>
<h2 id="s6-programs">s6 programs</h2>
<p>Below is an overview of several key s6 programs that come with installing s6-overlay.</p>
<h3 id="execlineb">execlineb</h3>
<p>Execlineb is a minimalistic command interpreter that is part of the s6 suite, designed specifically for process supervision and container management. Unlike traditional shells (such as Bash or sh), execlineb is not a full-featured scripting language but rather a purpose-built tool optimized for:</p>
<ul>
<li>Deterministic Process Management: It emphasizes predictable execution and precise control over processes.</li>
<li>Low Overhead: It’s lightweight, making it ideal for container environments where efficiency is key.</li>
<li>Reliability: With minimal dependencies and a straightforward design, execlineb helps prevent unexpected behavior in critical system scripts.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/execlineb -P
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"># Using the -P flag preserves the environment variables</span>
</span></span><span style="display:flex;"><span>s6-setuidgid www-data
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exec</span> /usr/local/sbin/php-fpm --nodaemonize
</span></span></code></pre></div><p>Read more about it here: <a href="https://skarnet.org/software/execline/">https://skarnet.org/software/execline/</a></p>
<h3 id="with-contenv"><code>with-contenv</code></h3>
<p>The <code>with-contenv</code> command is designed to &ldquo;inject&rdquo; the container’s environment variables into the execution context. In containerized environments, it ensures that any environment variables set at the container level are available to the script.</p>
<p>Opposed to when you do not set it the program you execute will not kow about environment variables of the container.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/with-contenv sh
</span></span></span><span style="display:flex;"><span>env
</span></span></code></pre></div><h3 id="s6-setuidgid"><code>s6-setuidgid</code></h3>
<p>Always drop root privileges before running your service. In <code>execlineb</code>, you can do this as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/execlineb -P
</span></span></span><span style="display:flex;"><span>s6-setuidgid www-data myservice
</span></span></code></pre></div><p>Or in a shell script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exec</span> s6-setuidgid www-data myservice
</span></span></code></pre></div><p>Read more about it here: <a href="https://skarnet.org/software/s6/s6-setuidgid.html">https://skarnet.org/software/s6/s6-setuidgid.html</a></p>
<h2 id="customizing-behavior-with-environment-variables">Customizing Behavior with Environment Variables</h2>
<p>s6-overlay offers a range of environment variables for fine-tuning its behavior, such as:</p>
<ul>
<li><code>S6_BEHAVIOUR_IF_STAGE2_FAILS</code></li>
<li><code>S6_CMD_WAIT_FOR_SERVICES_MAXTIME</code></li>
<li><code>S6_KILL_GRACETIME</code></li>
<li><code>S6_LOGGING</code></li>
<li>&hellip;and many more.</li>
</ul>
<p>These allow you to adapt the container’s behavior to your specific needs.</p>
<h2 id="automating-tasks-with-recipes">Automating Tasks with Recipes</h2>
<p>After establishing your basic setup, you might want to extend functionality with additional recipes:</p>
<h3 id="database-migrations">Database Migrations</h3>
<p>Define an oneshot service to run your migration scripts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── init-migrations
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#8be9fd;font-style:italic">type</span>  <span style="color:#6272a4"># Contains &#34;oneshot&#34;</span>
</span></span><span style="display:flex;"><span>│   └── up
</span></span><span style="display:flex;"><span>└── scripts
</span></span><span style="display:flex;"><span>  └── init-migrations
</span></span></code></pre></div><p>And in the migration script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/with-contenv sh
</span></span></span><span style="display:flex;"><span>s6-setuidgid www-data
</span></span><span style="display:flex;"><span>php /var/www/html/bin/console doctrine:migrations:migrate --no-interaction
</span></span><span style="display:flex;"><span>php /var/www/html/bin/console doctrine:migrations:status
</span></span></code></pre></div><h3 id="scheduled-cron-jobs">Scheduled Cron Jobs</h3>
<p>Symfonys scheduler component replaces cron jobs so you can run scheduled jobs in your application. For this to work you need to have a process running all the time that runs in a loop and asks every time if there is a message scheduled to be triggered.
Read the complete documentation here: <a href="https://symfony.com/doc/current/scheduler.html">https://symfony.com/doc/current/scheduler.html</a></p>
<p>Create a longrun service to handle cron-like tasks, such as consuming message queues like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── svc-messenger-scheduler
</span></span><span style="display:flex;"><span>│   ├── dependencies.d
</span></span><span style="display:flex;"><span>│   │    └── svc-php-fpm
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#8be9fd;font-style:italic">type</span>
</span></span><span style="display:flex;"><span>│   └── run
</span></span><span style="display:flex;"><span>└── user/contents.d/svc-messenger-scheduler
</span></span></code></pre></div><p>In <code>/etc/s6-overlay/s6-rc.d/svc-messenger-scheduler/run</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/with-contenv sh
</span></span></span><span style="display:flex;"><span>s6-setuidgid www-data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>php /var/www/html/bin/console messenger:consume scheduler_default <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>  --time-limit<span style="color:#ff79c6">=</span><span style="color:#bd93f9">300</span> --limit<span style="color:#ff79c6">=</span><span style="color:#bd93f9">10</span> --env<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">`</span>printcontenv APP_ENV<span style="color:#f1fa8c">`</span> --quiet
</span></span></code></pre></div><h3 id="async-message-handling">Async Message handling</h3>
<p>Same as the scheduler there is a Symfony Messages component that will be connected to a transport and query for new messages. For that we need a worker service running that will consume messages and dispatch them to message handlers.
Read the complete documentation here: <a href="https://symfony.com/doc/current/messenger.html">https://symfony.com/doc/current/messenger.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── svc-messenger-async
</span></span><span style="display:flex;"><span>│   ├── dependencies.d
</span></span><span style="display:flex;"><span>│   │    └── svc-php-fpm
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#8be9fd;font-style:italic">type</span>
</span></span><span style="display:flex;"><span>│   └── run
</span></span><span style="display:flex;"><span>└── user/contents.d/svc-messenger-async
</span></span></code></pre></div><p>In <code>/etc/s6-overlay/s6-rc.d/svc-messenger-async/run</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/with-contenv sh
</span></span></span><span style="display:flex;"><span>s6-setuidgid www-data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>php /var/www/html/bin/console messenger:consume messenger:consume async <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    --time-limit<span style="color:#ff79c6">=</span><span style="color:#bd93f9">300</span> --limit<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1000</span> --env<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;</span><span style="color:#ff79c6">$(</span>printcontenv APP_ENV<span style="color:#ff79c6">)</span><span style="color:#f1fa8c">&#34;</span> --quiet
</span></span></code></pre></div><h3 id="feature-flags-with-s6_stage2_hook">Feature flags with <code>S6_STAGE2_HOOK</code></h3>
<p>Sometimes you want to deploy a container an turn services on or off depending on the function the container will have.</p>
<p>Those are the scenarios I came up with:</p>
<ul>
<li><strong>migrations</strong>: You want to run migrations but do not want to have to ssh onto the machine where the container is running, exec into it and then execute the script that will execute the migrations. You want to run them when the container starts, but you do not want to execute them always so you want a way how to disable them.</li>
<li><strong>worker</strong>: You want to run a container not accessible by http, but run worker scripts like for <code>symfony/scheduler</code> or <code>symfony/messenger</code>. Those would not need php-fpm or nginx running. And the workers would not need to run in the same container where the http accessible application is running. But in development it is a different story, there you want to run both.</li>
</ul>
<p>Everything is easy with this feature flag script set with the <code>S6_STAGE2_HOOK</code>.
It enables or disables specific services at startup, tailoring your container behavior to your deployment environment.</p>
<p>In the Dockerfile:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#6272a4"># set path to feature-toggle script</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ENV</span> <span style="color:#8be9fd;font-style:italic">S6_STAGE2_HOOK</span><span style="color:#ff79c6">=</span>/etc/s6-overlay/s6-hook/feature-toggle
</span></span></code></pre></div><p>The <code>feature-toggle</code> script</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/command/with-contenv sh
</span></span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">INIT_MIGRATIONS</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">FEATURE_INIT_MIGRATIONS</span><span style="color:#ff79c6">:-</span><span style="color:#8be9fd;font-style:italic">false</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">SVC_MESSENGER_SCHEDULER</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">FEATURE_RUN_QUEUE_SCHEDULER</span><span style="color:#ff79c6">:-</span><span style="color:#8be9fd;font-style:italic">false</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">SVC_MESSENGER_ASYNC</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">FEATURE_RUN_QUEUE_ASYNC</span><span style="color:#ff79c6">:-</span><span style="color:#8be9fd;font-style:italic">false</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">SVC_NGINX</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">FEATURE_RUN_NGINX</span><span style="color:#ff79c6">:-</span><span style="color:#8be9fd;font-style:italic">true</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">for</span> feature in <span style="color:#f1fa8c">&#34;INIT_MIGRATIONS SVC_MESSENGER_SCHEDULER SVC_NGINX&#34;</span>; <span style="color:#ff79c6">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">is_enabled</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span><span style="color:#8be9fd;font-style:italic">eval</span> <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">\$</span><span style="color:#ff79c6">{</span><span style="color:#8be9fd;font-style:italic">$feature</span>:-false<span style="color:#ff79c6">}</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">feature_file</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$feature</span><span style="color:#f1fa8c">&#34;</span> | tr <span style="color:#f1fa8c">&#39;[:upper:]&#39;</span> <span style="color:#f1fa8c">&#39;[:lower:]&#39;</span> | tr <span style="color:#f1fa8c">&#39;_&#39;</span> <span style="color:#f1fa8c">&#39;-&#39;</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[</span> <span style="color:#8be9fd;font-style:italic">$is_enabled</span> <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span> <span style="color:#ff79c6">]</span>; <span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;feature-toggle: info: </span><span style="color:#8be9fd;font-style:italic">$feature</span><span style="color:#f1fa8c"> is disabled. Deleting service: </span><span style="color:#8be9fd;font-style:italic">$feature_file</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span>        rm -f <span style="color:#f1fa8c">&#34;/etc/s6-overlay/s6-rc.d/user/contents.d/</span><span style="color:#8be9fd;font-style:italic">$feature_file</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">done</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span> <span style="color:#bd93f9">0</span>
</span></span></code></pre></div><p>In the <code>docker-compose.yaml</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ff79c6">services</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">app</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># ...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">environment</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">APP_ENV</span>: <span style="color:#f1fa8c">&#34;dev&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">FEATURE_RUN_NGINX</span>: <span style="color:#f1fa8c">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">FEATURE_RUN_QUEUE_SCHEDULER</span>: <span style="color:#f1fa8c">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">FEATURE_RUN_QUEUE_ASYNC</span>: <span style="color:#f1fa8c">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">FEATURE_INIT_MIGRATIONS</span>: <span style="color:#f1fa8c">&#34;false&#34;</span>
</span></span></code></pre></div><h2 id="s6-overlay-base-image">s6-overlay base image</h2>
<p>I created a base image for s6-overlay which will be build whenever s6-overlay pushes a new version.</p>
<p><a href="https://github.com/dazz/s6-overlay-base">https://github.com/dazz/s6-overlay-base</a></p>
<p>In your <code>Dockerfile</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">php:8.3-alpine3.21</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">COPY</span> --from<span style="color:#ff79c6">=</span>hakindazz/s6-overlay-base:3.2.0.2 /s6/root /
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># install your app here</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ENTRYPOINT</span> [<span style="color:#f1fa8c">&#34;/init&#34;</span>]
</span></span></code></pre></div><p>The interesting part IMHO is the github workflow that checks if an image for the current version exists and if not it will be built.
See here <a href="https://github.com/dazz/s6-overlay-base/blob/main/.github/workflows/docker-image-push.yml">https://github.com/dazz/s6-overlay-base/blob/main/.github/workflows/docker-image-push.yml</a>
You can adapt it und use it in your org if you need the be able to build your own base images .</p>
<div class="details admonition note open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf040;</i> This is a note<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Read the article that I wrote about it here: <a href="/posts/2024-08-19_base-image-with-s6-overlay/">Build your own s6-overlay base image</a></div>
  </div>
</div>
<h2 id="s6-cli">s6-cli</h2>
<p>I developed a small cli in Golang to ease creating, validating and documenting services that s6 supervises.</p>
<ul>
<li>The repo: <a href="https://github.com/dazz/s6-cli">https://github.com/dazz/s6-cli</a></li>
<li>The Docker image: <a href="https://hub.docker.com/repository/docker/hakindazz/s6-cli">https://hub.docker.com/repository/docker/hakindazz/s6-cli</a></li>
</ul>
<div class="details admonition note open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf040;</i> This is a note<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Read the article that I wrote about it here: <a href="/posts/2024-12-06_s6-cli/">Manage s6-overlay setup with s6-cli</a></div>
  </div>
</div>
<h2 id="conclusion">Conclusion</h2>
<p>Using s6-overlay in your dockerized PHP / Symfony setup offers a robust, production-ready solution to manage multiple processes within a single container.</p>
<p>With proper process supervision, controlled startup/shutdown sequences, and versatile configuration options, s6-overlay fills the gap left by traditional Docker practices. Whether you’re running PHP-FPM, NGINX, or any combination of services, this approach leads to a more stable and maintainable environment.</p>
<p>By following the in-depth examples and best practices outlined above, PHP developers can confidently migrate their Dockerized applications to the cloud, knowing that every process is well-managed and health-checked.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/just-containers/s6-overlay">https://github.com/just-containers/s6-overlay</a></li>
<li><a href="https://skarnet.org/software/s6/overview.html">https://skarnet.org/software/s6/overview.html</a></li>
<li><a href="https://serversideup.net/open-source/docker-php/docs/guide/using-s6-overlay">https://serversideup.net/open-source/docker-php/docs/guide/using-s6-overlay</a></li>
<li><a href="https://www.tonysm.com/multiprocess-containers-with-s6-overlay/">https://www.tonysm.com/multiprocess-containers-with-s6-overlay/</a></li>
<li><a href="https://github.com/dazz/s6-overlay-base">https://github.com/dazz/s6-overlay-base</a></li>
<li><a href="https://github.com/dazz/s6-nginx-php-fpm">https://github.com/dazz/s6-nginx-php-fpm</a></li>
<li><a href="https://stackoverflow.com/questions/43122080/how-to-use-init-parameter-in-docker-run">How to use &ndash;init parameter in docker run - Stack Overflow</a></li>
<li><a href="https://docs.docker.com/engine/containers/multi-service_container/">Run multiple processes in a container - Docker Documentation</a></li>
<li><a href="https://www.baeldung.com/ops/docker-init-parameter">How to Use &ndash;init Parameter in Docker Run Command - Baeldung</a></li>
<li><a href="https://spacelift.io/blog/docker-init">What is Docker Init &amp; When to Use It - Best Practices - Spacelift</a></li>
<li><a href="https://www.paolomainardi.com/posts/docker-run-init/">docker run &ndash;init: to the rescue of zombie processes - Paolo Mainardi</a></li>
<li><a href="https://cloud.theodo.com/en/blog/docker-processes-container">Container lifecycle | Improve it with PID 1 in Docker | Padok</a></li>
</ul>
]]></description><media:thumbnail url="https://blog.dazzlog.de/multi-process-container.webp"/></item><item><title>Manage s6-overlay setup with s6-cli</title><link>https://blog.dazzlog.de/posts/2024-12-06_s6-cli/</link><pubDate>Fri, 06 Dec 2024 23:42:23 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2024-12-06_s6-cli/</guid><description><![CDATA[<p>I developed a small cli in golang to ease creating, validating and documenting services that s6 supervises.</p>
<ul>
<li>The repo: <a href="https://github.com/dazz/s6-cli">https://github.com/dazz/s6-cli</a></li>
<li>The docker image: <a href="https://hub.docker.com/repository/docker/hakindazz/s6-cli">https://hub.docker.com/repository/docker/hakindazz/s6-cli</a></li>
</ul>
<h2 id="usage">Usage</h2>
<p>You do not need to install anything, just execute the binary via docker</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -it --rm hakindazz/s6-cli <span style="color:#8be9fd;font-style:italic">help</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>COMMANDS:
</span></span><span style="display:flex;"><span>   create, c   create a service
</span></span><span style="display:flex;"><span>   remove, rm  remove a service
</span></span><span style="display:flex;"><span>   lint, l     lint directories and files
</span></span><span style="display:flex;"><span>   mermaid, m  document s6 service dependencies in mermaid syntax
</span></span><span style="display:flex;"><span>   help, h     Shows a list of commands or <span style="color:#8be9fd;font-style:italic">help</span> <span style="color:#ff79c6">for</span> one <span style="color:#8be9fd;font-style:italic">command</span>
</span></span></code></pre></div><h2 id="create-a-service-with-s6-cli">Create a service with s6-cli</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -it --rm -v ./:/etc/s6-overlay hakindazz/s6-cli create oneshot init-dependencies
</span></span></code></pre></div><p>Here is the file / directory structure it creates:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>/etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>├── init-dependencies
</span></span><span style="display:flex;"><span>│   ├── dependencies.d
</span></span><span style="display:flex;"><span>│   │    ├── base
</span></span><span style="display:flex;"><span>│   │    └── svc-php-fpm
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#8be9fd;font-style:italic">type</span>
</span></span><span style="display:flex;"><span>│   └── up
</span></span><span style="display:flex;"><span>└── scripts
</span></span><span style="display:flex;"><span>        └── init-dependencies
</span></span></code></pre></div><ul>
<li>The <code>base</code> dependency is added by <code>s6-cli</code></li>
<li>Adding <code>base</code> as default dependency tells s6-rc to only start a service when all the base services are ready, and it prevents race conditions</li>
</ul>
<h2 id="use-s6-cli-in-your-ci">Use s6-cli in your CI</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -it --rm -v .:/etc/s6-overlay hakindazz/s6-cli lint
</span></span></code></pre></div><p>It will tell you when it does not find any issue</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>s6-cli: lint found no issues
</span></span></code></pre></div><p>Or list the findings so you can fix them before you deploy.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>s6-cli: lint found issues with services in /etc/s6-overlay/s6-rc.d
</span></span><span style="display:flex;"><span>- svc-lint-me
</span></span><span style="display:flex;"><span>  - <span style="color:#8be9fd;font-style:italic">type</span> file <span style="color:#ff79c6">for</span> <span style="color:#f1fa8c">&#34;svc-lint-me&#34;</span> does not end with a newline
</span></span><span style="display:flex;"><span>  - invalid <span style="color:#8be9fd;font-style:italic">type</span> in svc-lint-me/type file specified
</span></span></code></pre></div><h2 id="document-your-setup-with-mermaid">Document your setup with mermaid</h2>
<p>You can use the <code>mermaid</code> command to output the dependency graph between the services:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -it --rm -v .:/etc/s6-overlay hakindazz/s6-cli mermaid
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>```mermaid
</span></span><span style="display:flex;"><span>graph TD;
</span></span><span style="display:flex;"><span>    user --&gt; init-dependencies
</span></span><span style="display:flex;"><span>    user --&gt; init-migrations
</span></span><span style="display:flex;"><span>    user --&gt; svc-nginx
</span></span><span style="display:flex;"><span>    init-migrations --&gt; init-directories
</span></span><span style="display:flex;"><span>    svc-php-fpm --&gt; init-directories
</span></span><span style="display:flex;"><span>    svc-nginx --&gt; init-nginx
</span></span><span style="display:flex;"><span>    svc-nginx --&gt; svc-php-fpm
</span></span></code></pre></div><p>Which will result in this mermaid</p>
<div class="mermaid">
    
graph TD;
user --> init-dependencies
user --> init-migrations
user --> svc-nginx
init-migrations --> init-directories
svc-php-fpm --> init-directories
svc-nginx --> init-nginx
svc-nginx --> svc-php-fpm

</div>

<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, theme: "dark" });
</script>
]]></description><media:thumbnail url="https://blog.dazzlog.de/s6-cli.webp"/></item><item><title>Build your own s6-overlay base image</title><link>https://blog.dazzlog.de/posts/2024-08-19_base-image-with-s6-overlay/</link><pubDate>Mon, 19 Aug 2024 23:42:23 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2024-08-19_base-image-with-s6-overlay/</guid><description><![CDATA[<p>S6-overlay is a container-focused process manager that offers end-to-end management of the container&rsquo;s lifecycle, from initialization to graceful shutdown.</p>
<p>To make use of s6-overlay we need to add the binaries to our container by adding, extracting and then moving them to the directory where they are expected.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">ADD</span> https://github.com/just-containers/s6-overlay/releases/download/3.2.0.0/s6-overlay-noarch.tar.xz /tmp  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ADD</span> https://github.com/just-containers/s6-overlay/releases/download/3.2.0.0/s6-overlay-x86_64.tar.xz /tmp
</span></span></code></pre></div><h2 id="update-dependencies">Update dependencies</h2>
<p>When adding the s6-overlay sources to in a <code>Dockerfile</code> we want to make sure that we get notified when a new version
is available, so we can always be up-to-date with all our libraries. This can be achieved by adding a section to our <a href="https://github.com/renovatebot/renovate">Renovate</a> or <a href="https://github.com/dependabot">Dependabot</a> config, a rule to match</p>
<h2 id="version-checker-know-about-docker-from">Version checker know about Docker <code>FROM</code></h2>
<p>If we leverage the <code>FROM</code> of docker to include our sources we would not need to add anything. I already use the way of loading sources via images in several places:</p>
<h3 id="include-composer">include composer</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">composer:2.7.7</span> <span style="color:#ff79c6">AS</span> <span style="color:#f1fa8c">composer</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">COPY</span> --from<span style="color:#ff79c6">=</span>composer /usr/bin/composer /usr/bin/composer
</span></span></code></pre></div><h3 id="include-extension-installer">include extension-installer</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">mlocati/php-extension-installer:2.2.16</span> <span style="color:#ff79c6">AS</span> <span style="color:#f1fa8c">php-extension-installer</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">COPY</span> --from<span style="color:#ff79c6">=</span>php-extension-installer /usr/bin/install-php-extensions /usr/local/bin/
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">RUN</span> install-php-extensions <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>  xdebug <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>  zip <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><p>But there is no base image for s6-overlay from justcontainers/s6-overlay . There are some other vendors, but they are opinionated and do more things that are helpful to their case.</p>
<h2 id="build-your-own-s6-overlay-base-image">Build your own s6-overlay base image</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">alpine:3</span> <span style="color:#ff79c6">AS</span> <span style="color:#f1fa8c">s6</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ARG</span> TARGETARCH
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ARG</span> TARGETVARIANT
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ARG</span> S6_RELEASE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">RUN</span> apk add --no-cache curl jq <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[</span> -z <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span> <span style="color:#ff79c6">]</span>; <span style="color:#ff79c6">then</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>         <span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>curl -s https://api.github.com/repos/just-containers/s6-overlay/releases/latest | jq -r <span style="color:#f1fa8c">&#39;.tag_name&#39;</span> | cut -c2-<span style="color:#ff79c6">)</span>; <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>       <span style="color:#ff79c6">fi</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(case</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">TARGETARCH</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">TARGETVARIANT</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span> in <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>         <span style="color:#f1fa8c">&#34;arm/v7&#34;</span><span style="color:#ff79c6">)</span>   <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;armhf&#34;</span>;; <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>         <span style="color:#f1fa8c">&#34;arm64/&#34;</span><span style="color:#ff79c6">)</span>   <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;aarch64&#34;</span>;; <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>         *<span style="color:#ff79c6">)</span>          <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;x86_64&#34;</span>;; <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>       <span style="color:#ff79c6">esac</span><span style="color:#ff79c6">)</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;Using s6 release </span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c"> platform </span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> curl -sSL <span style="color:#f1fa8c">&#34;https://github.com/just-containers/s6-overlay/releases/download/v</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/s6-overlay-noarch.tar.xz&#34;</span> -o <span style="color:#f1fa8c">&#34;/tmp/s6-overlay-noarch.tar.xz&#34;</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> curl -sSL <span style="color:#f1fa8c">&#34;https://github.com/just-containers/s6-overlay/releases/download/v</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/s6-overlay-</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">.tar.xz&#34;</span> -o <span style="color:#f1fa8c">&#34;/tmp/s6-overlay-</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">.tar.xz&#34;</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> curl -sSL <span style="color:#f1fa8c">&#34;https://github.com/just-containers/s6-overlay/releases/download/v</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/s6-overlay-noarch.tar.xz.sha256&#34;</span> -o <span style="color:#f1fa8c">&#34;/tmp/s6-overlay-noarch.tar.xz.sha256&#34;</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> curl -sSL <span style="color:#f1fa8c">&#34;https://github.com/just-containers/s6-overlay/releases/download/v</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">/s6-overlay-</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">.tar.xz.sha256&#34;</span> -o <span style="color:#f1fa8c">&#34;/tmp/s6-overlay-</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">.tar.xz.sha256&#34;</span> <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#8be9fd;font-style:italic">cd</span> /tmp <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> sha256sum -c s6-overlay-noarch.tar.xz.sha256 <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> sha256sum -c s6-overlay-<span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span>.tar.xz.sha256 <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> mkdir -p /s6/root <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> tar -C /s6/root -Jxpf /tmp/s6-overlay-noarch.tar.xz <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&amp;&amp;</span> tar -C /s6/root -Jxpf /tmp/s6-overlay-<span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">S6_PLATFORM</span><span style="color:#f1fa8c">}</span>.tar.xz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">scratch</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">COPY</span> --from<span style="color:#ff79c6">=</span>s6 /s6/root /s6/root
</span></span></code></pre></div><p>It</p>
<ul>
<li>downloads for the specified architecture</li>
<li>asserts the checksum!</li>
<li>uses a fresh layer to copy everything</li>
</ul>
<p>This can be built with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker build --no-cache --build-arg <span style="color:#8be9fd;font-style:italic">S6_RELEASE</span><span style="color:#ff79c6">=</span>3.2.0.0 -t hakindazz/s6-overlay-base:3.2.0.0 .
</span></span></code></pre></div><p>Or you can pull the image to check it out:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker pull hakindazz/s6-overlay-base:3.2.0.0
</span></span></code></pre></div><h2 id="include-via-docker-from">Include via docker <code>FROM</code></h2>
<p>The best part: You can now include the versioned sources via docker <code>--from</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">hakindazz/s6-overlay-base</span> <span style="color:#ff79c6">AS</span> <span style="color:#f1fa8c">s6-overlay</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">FROM</span> <span style="color:#f1fa8c">alpine3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">COPY</span> --from<span style="color:#ff79c6">=</span>s6-overlay /s6/root /
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ENTRYPOINT</span> [<span style="color:#f1fa8c">&#34;/init&#34;</span>]
</span></span></code></pre></div><h2 id="happy-image-building">Happy image building!!!</h2>
<h3 id="some-sources">Some sources:</h3>
<ul>
<li><a href="https://github.com/just-containers/s6-overlay">https://github.com/just-containers/s6-overlay</a></li>
<li><a href="https://github.com/dazz/s6-overlay-base">https://github.com/dazz/s6-overlay-base</a></li>
<li><a href="https://hub.docker.com/r/hakindazz/s6-overlay-base">https://hub.docker.com/r/hakindazz/s6-overlay-base</a></li>
<li><a href="https://github.com/dependabot">https://github.com/dependabot</a></li>
<li><a href="https://docs.renovatebot.com/modules/datasource/github-releases/">https://docs.renovatebot.com/modules/datasource/github-releases/</a></li>
</ul>
]]></description><media:thumbnail url="https://blog.dazzlog.de/s6-overlay.webp"/></item><item><title>Environment variables in a dockerized Symfony</title><link>https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony/</link><pubDate>Mon, 02 Jan 2023 19:24:18 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2023-01-02_environment-variables-in-a-dockerized-symfony/</guid><description><![CDATA[<p>I have developed a <strong>Symfony Web-Application</strong>, and it runs locally in a dockerized environment with docker-compose. This app is going to be deployed to production as a docker container.
In production the handling of environment variables and how they are passed to the container during development is different.</p>
<h2 id="12-factor-app">12 Factor App</h2>
<p>A few points from the <a href="https://12factor.net">12factor methodology</a>:</p>
<ul>
<li><a href="https://12factor.net/config">III. Config</a>: Store config in the environment since env vars are easy to change between deploys without changing any code</li>
<li><a href="https://12factor.net/dev-prod-parity">X. Dev/prod parity</a>: Keep development, staging, and production as similar as possible</li>
</ul>
<p>I was searching for options how to handle the differences how environment variables are passed and I found there are at least</p>
<h2 id="7-ways-to-pass-environment-variables-to-a-container">7 ways to pass environment variables to a container</h2>
<ol>
<li><code>ENV</code> in dockerfile</li>
<li>Dockerfile args passed at build time to <code>ENV</code></li>
<li>ENV passing in docker run as option</li>
<li>Env_file in docker run as option</li>
<li>Environment variables in <code>docker-compose.yml</code></li>
<li>Env_file in docker compose for each service</li>
<li><code>.env</code> in docker compose substitutes variables in <code>docker-compose.yml</code></li>
</ol>
<p>And there is even more. If variables are passed to a container there is an order of precedence as follows:</p>
<div class="details admonition tip open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf400;</i> Order of Precedence<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content"><ol>
<li>Passed from the command line <a href="https://docs.docker.com/compose/envvars-precedence/../../engine/reference/commandline/compose_run#options"><code>docker compose run --env &lt;KEY[=[VAL]]&gt;</code></a>.</li>
<li>Passed from/set in <code>compose.yaml</code> service’s configuration, from the <a href="https://docs.docker.com/compose/envvars-precedence/../../compose/compose-file#environment">environment key</a>.</li>
<li>Passed from/set in <code>compose.yaml</code> service’s configuration, from the <a href="https://docs.docker.com/compose/envvars-precedence/../../compose/compose-file#env_file">env_file key</a>.</li>
<li>Passed from/set in Container Image in the <a href="https://docs.docker.com/engine/reference/builder#env">ENV directive</a>.</li>
</ol>
<p>from <a href="https://docs.docker.com/compose/envvars-precedence/">https://docs.docker.com/compose/envvars-precedence/</a></p></div>
  </div>
</div>
<h1 id="how-to-deal-with-environment-variables-in-a-dockerized-symfony">How to deal with environment variables in a dockerized Symfony</h1>
<h2 id="the-goal">The goal</h2>
<p>All services regardless of which technology they use, should have one streamlined way of how the environment variables should be passed to the application.</p>
<h2 id="the-big-picture">The big picture</h2>
<ul>
<li>We use multiple services which all need to work together</li>
<li>Services run in docker container</li>
<li>We deploy and run services in different compositions for each environment</li>
<li>Each service has their own sensitive data</li>
<li>Each service might be a different technology or has a different tech stack</li>
</ul>
<h2 id="steps-towards-the-goal">Steps towards the goal</h2>
<ul>
<li>The infrastructure config should be kept in env files but not in the same directory as the application</li>
<li>Each service gets its own env file to be completely independent of each other, and it gets explicitly set</li>
<li>During development each service gets the env variables passed via env file (<code>env_file</code> in docker-compose)</li>
<li>Every project that has a <code>docker-compose.yml</code> moves the application into an <code>app</code> directory to separate the application from its infrastructure configuration</li>
<li>We remove the DotEnv component from symfony and define each environment variable that we expect as parameter so the app tells us instantly when a key-value pair is missing</li>
<li>In development credentials can be added to the VCS</li>
<li>In all other envs the credentials can be either stored and linked on the server or be read from a vault</li>
</ul>
<h2 id="the-implementation">The implementation</h2>
<p>In Symfony the DotEnv component is default installed and enabled in the frontcontroller, so when a new app is created there is always a <code>.env</code> file at the project root created with it. <a href="https://symfony.com/doc/current/configuration.html#configuring-environment-variables-in-env-files">Read more in the documentation.</a></p>
<p>It is not the same <code>.env</code> that <code>docker-compose.yml</code> expects.
<div class="details admonition warning open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf071;</i> Symfony DotEnv and Docker Compose use the same file name .env<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Docker compose is also using a file named  <code>.env</code> to replace the variables in the <code>docker-compose.yml</code> if it is located in the same directory.
If you don&rsquo;t know that and put the web apps <code>.env</code> file in the same place then you accidentally might overwrite variables when you think you just updated a variable for the Symfony application.</div>
  </div>
</div></p>
<p>We have two different stacks here that both want to use the <code>.env</code> file and both might, but not at the same time, obviously.</p>
<p>Since we want to use config variables explicitly and not by accident the Symfony DotEnv component is going to be removed and all config is moved inside environment variable files that are passed into the container.</p>
<h3 id="the-directory-tree">The directory tree</h3>
<p>To ease the separation of infrastructure and code the application code moves into the <code>./app</code> directory to be completely separate from the code/config that defines the infrastructure.
You see there is no <code>.env</code> file left from Symfony. All variables have now moved to the env files inside the <code>devops/env</code> directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#ff79c6">.</span>
</span></span><span style="display:flex;"><span>├── app
</span></span><span style="display:flex;"><span>│   ├── assets
</span></span><span style="display:flex;"><span>│   ├── bin
</span></span><span style="display:flex;"><span>│   ├── ci
</span></span><span style="display:flex;"><span>│   ├── config
</span></span><span style="display:flex;"><span>│   ├── migrations
</span></span><span style="display:flex;"><span>│   ├── node_modules
</span></span><span style="display:flex;"><span>│   ├── public
</span></span><span style="display:flex;"><span>│   │   └── index<span style="color:#ff79c6">.</span>php
</span></span><span style="display:flex;"><span>│   ├── src
</span></span><span style="display:flex;"><span>│   ├── templates
</span></span><span style="display:flex;"><span>│   ├── tests
</span></span><span style="display:flex;"><span>│   ├── <span style="color:#ff79c6">var</span>
</span></span><span style="display:flex;"><span>│   ├── vendor
</span></span><span style="display:flex;"><span>│   ├── composer<span style="color:#ff79c6">.</span>json
</span></span><span style="display:flex;"><span>│   ├── composer<span style="color:#ff79c6">.</span>lock
</span></span><span style="display:flex;"><span>│   ├── Makefile
</span></span><span style="display:flex;"><span>│   ├── package<span style="color:#ff79c6">.</span>json
</span></span><span style="display:flex;"><span>│   ├── symfony<span style="color:#ff79c6">.</span>lock
</span></span><span style="display:flex;"><span>│   ├── webpack<span style="color:#ff79c6">.</span>config<span style="color:#ff79c6">.</span>js
</span></span><span style="display:flex;"><span>│   └── yarn<span style="color:#ff79c6">.</span>lock
</span></span><span style="display:flex;"><span>├── devops
</span></span><span style="display:flex;"><span>│   ├── database
</span></span><span style="display:flex;"><span>│   ├── docker
</span></span><span style="display:flex;"><span>│   │   └── frankenphp
</span></span><span style="display:flex;"><span>│   │        └── Dockerfile
</span></span><span style="display:flex;"><span>│   └── env
</span></span><span style="display:flex;"><span>│       ├── app<span style="color:#ff79c6">.</span>env
</span></span><span style="display:flex;"><span>│       └── database<span style="color:#ff79c6">.</span>env
</span></span><span style="display:flex;"><span>├── CONTRIBUTING<span style="color:#ff79c6">.</span>md
</span></span><span style="display:flex;"><span>├── docker<span style="color:#ff79c6">-</span>compose<span style="color:#ff79c6">.</span>prod<span style="color:#ff79c6">.</span>yml
</span></span><span style="display:flex;"><span>├── docker<span style="color:#ff79c6">-</span>compose<span style="color:#ff79c6">.</span>yml
</span></span><span style="display:flex;"><span>├── Makefile
</span></span><span style="display:flex;"><span>└── README<span style="color:#ff79c6">.</span>md
</span></span></code></pre></div><h2 id="the-docker-composeyml">The docker-compose.yml</h2>
<p>Each service gets its own <code>env_file</code> where we can configure the sensitive data for each service.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ff79c6">version</span>: <span style="color:#f1fa8c">&#39;3.9&#39;</span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">services</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">app</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">image</span>: ghcr.io/c-base/cbag3:dev-latest  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">build</span>:  
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">dockerfile</span>: ./devops/docker/frankenphp/Dockerfile  
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">target</span>: dev  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">env_file</span>: ./devops/env/app.env  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">ports</span>:  
</span></span><span style="display:flex;"><span>      - <span style="color:#bd93f9">80</span>:<span style="color:#bd93f9">80</span>  
</span></span><span style="display:flex;"><span>      - <span style="color:#bd93f9">443</span>:<span style="color:#bd93f9">443</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">volumes</span>:  
</span></span><span style="display:flex;"><span>      - <span style="color:#f1fa8c">&#39;./app:/app&#39;</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">database</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">image</span>: postgres:alpine  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">container_name</span>: database  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">env_file</span>: ./devops/env/database.env  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">ports</span>:  
</span></span><span style="display:flex;"><span>      - <span style="color:#bd93f9">15432</span>:<span style="color:#bd93f9">5432</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">volumes</span>:  
</span></span><span style="display:flex;"><span>      - ./devops/database:/var/lib/postgresql
</span></span></code></pre></div><div class="details admonition tip open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf400;</i> tip<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">the <code>.env</code> file can be used with docker compose to configure variables inside the <code>docker-compose.yml</code></div>
  </div>
</div>
<h2 id="disable-dotenv-in-frontcontroller--and-console">Disable DotEnv in frontcontroller  and console</h2>
<p>The DotEnv component is disabled since all environment variables have already passed to the container.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#6272a4"># app/public/index.php
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6">&lt;?</span>php  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">use</span> Cbase\App\Kernel;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">$_SERVER</span>[<span style="color:#f1fa8c">&#39;APP_RUNTIME_OPTIONS&#39;</span>][<span style="color:#f1fa8c">&#39;disable_dotenv&#39;</span>] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>; 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">require_once</span> dirname(__DIR__)<span style="color:#ff79c6">.</span><span style="color:#f1fa8c">&#39;/vendor/autoload_runtime.php&#39;</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">return</span> <span style="color:#ff79c6">function</span> (<span style="color:#ff79c6">array</span> <span style="color:#8be9fd;font-style:italic">$context</span>) {  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> Kernel(<span style="color:#8be9fd;font-style:italic">$context</span>[<span style="color:#f1fa8c">&#39;APP_ENV&#39;</span>], (bool) <span style="color:#8be9fd;font-style:italic">$context</span>[<span style="color:#f1fa8c">&#39;APP_DEBUG&#39;</span>]);  
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#6272a4"># app/bin/console
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">#!/usr/bin/env php  
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6">&lt;?</span>php  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">use</span> Cbase\App\Kernel;  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">use</span> Symfony\Bundle\FrameworkBundle\Console\Application;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">$_SERVER</span>[<span style="color:#f1fa8c">&#39;APP_RUNTIME_OPTIONS&#39;</span>][<span style="color:#f1fa8c">&#39;disable_dotenv&#39;</span>] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">require_once</span> dirname(__DIR__) <span style="color:#ff79c6">.</span> <span style="color:#f1fa8c">&#39;/vendor/autoload_runtime.php&#39;</span>;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">return</span> <span style="color:#ff79c6">function</span> (<span style="color:#ff79c6">array</span> <span style="color:#8be9fd;font-style:italic">$context</span>) {  
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">$kernel</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Kernel(<span style="color:#8be9fd;font-style:italic">$context</span>[<span style="color:#f1fa8c">&#39;APP_ENV&#39;</span>], (bool) <span style="color:#8be9fd;font-style:italic">$context</span>[<span style="color:#f1fa8c">&#39;APP_DEBUG&#39;</span>]);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> Application(<span style="color:#8be9fd;font-style:italic">$kernel</span>);  
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><div class="details admonition symfony open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xe756;</i> Symfony Runtime<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">See described here: <a href="https://symfony.com/doc/current/components/runtime.html#using-options">Configure Symfony Runtime Using Options</a></div>
  </div>
</div>
<div class="details admonition note open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf040;</i> run app only inside container<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">By disabling DotEnv we will no longer be able to run the application outside the container (our local machine) unless we set all environment variables there as well.</div>
  </div>
</div>
<div class="details admonition note open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf040;</i> keep DotEnv for tests<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">For now, we leave the DotEnv for the tests since those environment variables won&rsquo;t change regardless of where they are executed, and they will be executed in the dev container. We could change that by running the tests in their own container, but for now keep the <code>.env.test</code>.</div>
  </div>
</div>
<h2 id="dont-forget-to-add-the-parameters-in-servicesyml">Don&rsquo;t forget to add the parameters in <code>services.yml</code></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#6272a4"># app/config/services.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">parameters</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">images.upload.directory</span>: <span style="color:#f1fa8c">&#39;%env(resolve:IMAGES_UPLOAD_DIRECTORY)%&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">services</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">_defaults</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">autowire</span>: <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">autoconfigure</span>: <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">bind</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">string $imagesUploadDirectory</span>: <span style="color:#f1fa8c">&#39;%images.upload.directory%&#39;</span>
</span></span></code></pre></div><p>Since every environment has its own env_file there is the danger of forgetting to add an environment variable to the other environments.</p>
<div class="details admonition tip open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf400;</i> tip<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">In order to fail early we load the environment variable at the start of the application, by binding it.
If we do not bind parameters to variables but just bin them to a service we might miss that we forgot to set an
environment variable in the env file since the service might not be loaded in every request.</div>
  </div>
</div>
<h2 id="run-docker--container-in-production-with-env-file">Run docker  container in production with env-file</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat devops/env/app.env
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># This is a comment</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">IMAGES_UPLOAD_DIRECTORY</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;%kernel.project_dir%/var/uploads&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run --env-file devops/env/app.env app env | grep -E <span style="color:#f1fa8c">&#39;IMAGES&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">IMAGES_UPLOAD_DIRECTORY</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;%kernel.project_dir%/var/uploads&#34;</span>
</span></span></code></pre></div><p>Read more about it in the <a href="https://docs.docker.com/engine/reference/commandline/run/#-set-environment-variables--e---env---env-file">docker documentation</a>.</p>
<h2 id="migration-path">Migration Path</h2>
<p>There is a migration path for projects that use already many config yaml files and want to migrate to environment
variables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#6272a4"># config/my-app.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">parameters</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">images.upload.directory</span>: <span style="color:#f1fa8c">&#39;%kernel.project_dir%/var/uploads&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#6272a4"># config/services.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">parameters</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">env(IMAGES_UPLOAD_DIRECTORY)</span>: <span style="color:#f1fa8c">&#39;%images.upload.directory%&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">_defaults</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">bind</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">string $imagesUploadDirectory</span>: <span style="color:#f1fa8c">&#39;%env(resolve:IMAGES_UPLOAD_DIRECTORY)%&#39;</span>
</span></span></code></pre></div><ol>
<li>the configuration processor looks up if there is an environment variable <code>IMAGES_UPLOAD_DIRECTORY</code></li>
<li>if that is the case, it will be taken,</li>
<li>otherwise if it is not found <code>'%images.upload.directory%'</code> will be set to the environment variable.</li>
<li>the <code>'%env(resolve:IMAGES_UPLOAD_DIRECTORY)%'</code> is bound to a variable <code>$imagesUploadDirectory</code></li>
</ol>
<p>Read more about configuration processors in the <a href="https://symfony.com/doc/current/configuration/env_var_processors.html">Symfony documentation about &ldquo;Environment Variable Processors&rdquo;</a>.</p>
<p>This would result in the following migration path:</p>
<ol>
<li>Make it possible to set variables via environment variables</li>
<li>Make sure all environments set the corresponding variables</li>
<li>Remove many quirky unnecessary config files</li>
<li>win</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>We removed the DotEnv from Symfony and will miss out on all the functionality that came with it, but chose using the <code>env_file</code> as it can be used for running a container, and it can be configured in the <code>docker-compose.yml</code>.
The environment configs can be dumped from secret vaults regardless of the tech-stack that the cloud has to offer or kept in a shared directory that won&rsquo;t change between deployments.
There will be <strong>one</strong> explicit way of how each service will get configuration regardless of their environment or tech stack.
Also, we learned that there is a simple way in Symfony to migrate to environment variables.</p>
<h2 id="happy-continuously-deploying-everyone">Happy continuously deploying everyone</h2>
<h4 id="more-sources">More sources</h4>
<ul>
<li><a href="https://rotempinchevskiboguslavsky.medium.com/environment-variables-in-container-vs-docker-compose-file-2426b2ec7d8b">Environment Variables in Container vs. Docker Compose File</a></li>
</ul>
]]></description><media:thumbnail url="https://blog.dazzlog.de/amy-humphries-2M_sDJ_agvs-unsplash.jpg"/></item><item><title>Build and push docker images to ghcr.io with GitHub Actions</title><link>https://blog.dazzlog.de/posts/2022-12-28_build-and-push-docker-images-to-ghcr-with-github-actions/</link><pubDate>Wed, 28 Dec 2022 00:25:38 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2022-12-28_build-and-push-docker-images-to-ghcr-with-github-actions/</guid><description><![CDATA[<p>When you host your project code on GitHub and want to release it as a docker image for deployment or just publish it, the way to go are GitHub actions. Actions are basically hooks that can start CI/DC workflows on repository events.</p>
<p>GitHub actions can be used to build and push images to GitHub’s Container Registry which are reachable under <a href="https://ghcr.io">https://ghcr.io</a> which is part of the package registry. The package registry is not only for docker images, it can also host quite a few other kinds of packages. In this case we’ll focus on docker images.</p>
<h2 id="prerequisites"><strong>Prerequisites</strong>:</h2>
<ul>
<li>GitHub Repository</li>
<li>Basic Knowledge about GitHub actions syntax</li>
<li>Dockerfile</li>
</ul>
<h2 id="the-github-workflow">The GitHub Workflow</h2>
<p>I created a workflow in my repository under <code>.github/workflow/cd.md</code> and added the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ff79c6">name</span>: Continuous Delivery
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">branches</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f1fa8c">&#39;main&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">tags</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f1fa8c">&#39;v*.*.*&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">build</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">name</span>: Buid and push Docker image to GitHub Container registry
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">runs-on</span>: ubuntu-latest
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">permissions</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">packages</span>: write
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">contents</span>: read
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Checkout the repository
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: actions/checkout@v3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Docker Setup Buildx
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: docker/setup-buildx-action@v2.2.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Docker Login
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: docker/login-action@v2.1.0
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">registry</span>: ghcr.io
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">username</span>: ${{ github.actor }}
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">password</span>: ${{ secrets.GITHUB_TOKEN }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Build and push Docker images
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: docker/build-push-action@v3.2.0
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">env</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">REGISTRY</span>: ghcr.io
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">IMAGE_NAME</span>: ${{ github.repository }}
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">context</span>: .
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">file</span>: ./Dockerfile
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">target</span>: final
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">push</span>: <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">tags</span>: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:latest
</span></span></code></pre></div><h2 id="lets-go-through-the-important-parts">Let’s go through the important parts:</h2>
<p><strong>Permissions</strong>: Actions have access to the repo while running. We should always make sure by setting the permissions, that actions have the minimum access they require. See here: permissions for the <code>github_token</code></p>
<p><strong>Step 1–2: Checkout the code and Setup docker</strong></p>
<p><strong>Step 3: Login to GitHub Container Registry</strong>: This is where the interesting part starts. <code>github.actor</code> is the user that triggers the workflow. For password use <code>secrets.GITHUB_TOKEN</code> which is a temporary token which is automatically generated for this workflow. See here: publishing images to github-packages.</p>
<p><strong>Step 4: Build and push Docker images</strong>: If the registry that you want to push to belongs to an organization then you will need to add permissions to create packages. If it lives under your own handle you don’t need to configure anything more since you are the owner already and the <code>secrets.GITHUB_TOKEN</code> has all the permissions granted.</p>
<p>The action will consume the Dockerfile and build the image up to the target build step that you can define. In docker the repository where the image will be hosted is also part of the tag. Setting the image name to the repository name will create an image with the following tag: <code>ghcr.io/OWNER/IMAGE_NAME:latest</code></p>
<p>Read more here: pushing container images</p>
<h2 id="happy-shipping-o">Happy shipping \o/</h2>
]]></description><media:thumbnail url="https://blog.dazzlog.de/dockergithub.png"/></item><item><title>Goodbye Jekyll, hello Hugo</title><link>https://blog.dazzlog.de/posts/2022-12-27_goodbye-jekyl-hello-hugo/</link><pubDate>Tue, 27 Dec 2022 17:44:27 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2022-12-27_goodbye-jekyl-hello-hugo/</guid><description><![CDATA[<p>I started this blog in March 2013 when I was working for ImagineEasy when I had a few ideas to write down on how I&rsquo;d work with Doctrine Repositories. I still like the idea, but I&rsquo;d probably do it a bit different today. The blog and also how I&rsquo;d work with doctrine.</p>
<p>At the time Jekyll was the way to handle a static file blog. Since then, again, a few things have changed. GitHub is now owned by Microsoft and there are GitHub Actions.</p>
<p>Jekyll still exists, but all in all I think it was a modern choice at a different time. So what&rsquo;s next then? I must admit I did not look far, it was more a Zeitgeist thing that just ran my way.</p>
<p>Someone mentioned HUGO as a blog that you can easily publish to from Obsidian, I&rsquo;m not planning on using that particular feature, but I looked <a href="https://gohugo.io/about/">HUGO</a> up, and it seems that it is exactly what I was to lazy to look for. A static site generator that uses markdown and can be build by GitHub Actions.</p>
<p>There is already a huge list of possible themes and many look promising from the thumbnail, but feature wise there is a huge difference. What to look out for:</p>
<ul>
<li>How far is the template deviating from the default, in case you ever want to change the template.</li>
<li>Which features do you want/need and are they already included, is it complicated to add them  later?</li>
<li>Are there existing installations that are actively used, so they can be used as a reference</li>
<li>Is there a reference/documentation on how to install it on the host</li>
<li>How do you publish new content, are there examples/documentation?</li>
<li>What is the version of the technologies in the deploy-chain, old?</li>
</ul>
<p>For every point there is also the question of how complicated each step is.</p>
<p>As a reference, this is what I ended up doing:</p>
<h2 id="local-setup">Local setup</h2>
<h3 id="install-hugo">install hugo</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt-get install hugo
</span></span></code></pre></div><h3 id="create-a-new-site">create a new site</h3>
<p>see the <a href="https://gohugo.io/getting-started/quick-start/">official Quick Start</a> for more infos.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo new site dazz.github.io
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> dazz.github.io
</span></span><span style="display:flex;"><span>git init
</span></span></code></pre></div><h3 id="add-a-theme">add a theme</h3>
<p>Look at all the <a href="https://themes.gohugo.io/tags/blog/">blog themes</a> hugo already has listed.</p>
<p>I chose <code>hugo-ficurinia</code> as it has the following enabled: tags, categories, fonts I like, simply deploys and looks as promised.</p>
<p>Add the theme as submodule:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git submodule add https://gitlab.com/gabmus/hugo-ficurinia themes/hugo-ficurinia
</span></span></code></pre></div><p>And run a local server to test everything</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo server -t hugo-ficurinia
</span></span></code></pre></div><h3 id="add-a-blog-post">add a blog post</h3>
<p>There is probably nothing much to see, so let&rsquo;s add a new post as draft.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo new posts/hello-world/index.md
</span></span></code></pre></div><p>Make sure to read about how to <a href="https://gohugo.io/content-management/organization/">organize the content</a> in directories.</p>
<h3 id="run-the-server">run the server</h3>
<p>And run the server again and also include the draft post</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo server -t hugo-ficurinia --buildDrafts
</span></span></code></pre></div><p>When you run just <code>hugo -t hugo-ficurinia</code>  the site will be build and dumped to <code>public/</code>. That is what we will later do to deploy the site.</p>
<p>Time to commit all the changed files and add the remote to push everything</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote add origin git@github.com:dazz/dazz.github.io.git
</span></span><span style="display:flex;"><span>git push origin main
</span></span></code></pre></div><p>There will nothing happen yet as we still need to add the github workflow</p>
<h2 id="deploy-to-github-pages-via-github-actions">Deploy to GitHub pages via GitHub actions</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p .github/workflows
</span></span><span style="display:flex;"><span>touch .github/workflows/pages-deploy.yml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#6272a4"># file: .github/workflows/pages-deploy.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">name</span>: <span style="color:#f1fa8c">&#34;Build and Deploy gh-pages&#34;</span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">on</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">push</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">branches</span>:  
</span></span><span style="display:flex;"><span>      - main  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">paths-ignore</span>:  
</span></span><span style="display:flex;"><span>      - .gitignore  
</span></span><span style="display:flex;"><span>      - README.md  
</span></span><span style="display:flex;"><span>      - LICENSE  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4"># Allows you to run this workflow manually from the Actions tab  </span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">workflow_dispatch</span>:  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">permissions</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">contents</span>: write <span style="color:#6272a4"># needed to push to the gh-pages branch</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">pages</span>: write  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">id-token</span>: write  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Allow one concurrent deployment  </span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">concurrency</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">group</span>: <span style="color:#f1fa8c">&#34;pages&#34;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">cancel-in-progress</span>: <span style="color:#ff79c6">true</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">jobs</span>:  
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">build</span>:  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">runs-on</span>: ubuntu-latest  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">steps</span>:  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 1 - Checks-out your repository under $GITHUB_WORKSPACE  </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Checkout  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: actions/checkout@v3  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">fetch-depth</span>: <span style="color:#bd93f9">0</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">submodules</span>: <span style="color:#ff79c6">true</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 2 - Sets up the latest version of Hugo  </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Hugo setup  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: peaceiris/actions-hugo@v2.6.0  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">extended</span>: <span style="color:#ff79c6">true</span>  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">hugo-version</span>: <span style="color:#f1fa8c">&#39;latest&#39;</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 3 - Adds a cache  </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">uses</span>: actions/cache@v2  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">path</span>: /tmp/hugo_cache  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">key</span>: ${{ runner.os }}-hugomod-${{ hashFiles(&#39;**/go.sum&#39;) }}  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">restore-keys</span>: |  
</span></span><span style="display:flex;"><span>            ${{ runner.os }}-hugomod-  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 4 - Clean and don&#39;t fail  </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Clean public directory  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">run</span>: rm -rf public/*  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 5 - Builds the site using the latest version of Hugo  </span>
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Also specifies the theme we want to use      </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: Build  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">run</span>: hugo --minify --theme=hugo-ficurinia  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4"># Step 6 - Push our generated site to our gh-pages branch  </span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ff79c6">name</span>: GitHub Pages action  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">uses</span>: peaceiris/actions-gh-pages@v3.9.0  
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">with</span>:  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">github_token</span>: ${{ secrets.GITHUB_TOKEN }}  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">publish_dir</span>: ./public  
</span></span><span style="display:flex;"><span>          <span style="color:#ff79c6">cname</span>: dazz.github.io
</span></span></code></pre></div><p>Read more about the options you get when using <a href="https://github.com/marketplace/actions/hugo-setup">peaceiris/actions-hugo</a> and <a href="https://github.com/marketplace/actions/github-pages-action">peaceiris/actions-gh-pages</a>.</p>
<h2 id="customization">Customization</h2>
<p>Now the customization party can start. All the options are listed in the <code>config.toml</code>.</p>
<h2 id="happy-blogging-o"><a href="https://dazz.github.io">Happy blogging \o/</a></h2>
]]></description><media:thumbnail url="https://blog.dazzlog.de/hugo.png"/></item><item><title>Hello, world!</title><link>https://blog.dazzlog.de/posts/2022-12-26_hello-world/</link><pubDate>Mon, 26 Dec 2022 21:29:35 +0100</pubDate><guid>https://blog.dazzlog.de/posts/2022-12-26_hello-world/</guid><description><![CDATA[<h2 id="introduction">Introduction</h2>
<p>This is <strong>bold</strong> text, and this is <em>emphasized</em> text.</p>
<p>Visit the <a href="https://gohugo.io">Hugo</a> website!</p>
]]></description></item><item><title>about</title><link>https://blog.dazzlog.de/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.dazzlog.de/about/</guid><description><![CDATA[<p>I love programming and most parts of it is trying to figure out how things can be used to make the life easier for everyone.</p>
<p>Symfony is making my life easier since 2012, and since 2021 I&rsquo;m the organizer of the Symfony User Group Berlin.</p>
<p>I&rsquo;m member of c-base, the crashed space station in berlin and there I experiment with all the other carbon based
beings how to interact in a future compatible way.</p>
<p><a href="/talks/">Sometimes I talk at conferences</a> about things I discover and think they might be useful for others.</p>
<h2 id="references">References</h2>
<ul>
<li>Logo: <a href="https://de.freepik.com/vektoren-kostenlos/niedlich-astronaut-arbeitende-mit-computer-karikatur-vektor-symbol-illustration-wissenschafts-technologie-ikonen-konzept-lokalisierter-erstklassiger-vektor-flacher-cartoon-stil_22750865.htm#query=space%20logo&amp;position=19&amp;from_view=search&amp;track=sph">Bild von catalyststuff auf Freepik</a></li>
</ul>
]]></description></item><item><title>impressum</title><link>https://blog.dazzlog.de/impressum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.dazzlog.de/impressum/</guid><description><![CDATA[<h2 id="angaben-gemäß--5-tmg">Angaben gemäß § 5 TMG</h2>
<p>Anne Seitz</p>
<p>Tempelhofer Ufer 1</p>
<p>10961 Berlin</p>
<h3 id="kontakt">Kontakt:</h3>
<p>E-Mail: <a href="mailto:dazzlog@gmail.com">dazzlog@gmail.com</a></p>
<h2 id="verantwortlich-für-den-inhalt-nach--55-abs-2-rstv">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV:</h2>
<p>Anne Seitz</p>
<p>Tempelhofer Ufer 1</p>
<p>10961 Berlin</p>
<h2 id="haftungsausschluss">Haftungsausschluss:</h2>
<h3 id="haftung-für-inhalte">Haftung für Inhalte</h3>
<p>Die Inhalte unserer Seiten wurden mit größter Sorgfalt erstellt. Für die Richtigkeit, Vollständigkeit und Aktualität der Inhalte können wir jedoch keine Gewähr übernehmen. Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.</p>
<h3 id="haftung-für-links">Haftung für Links</h3>
<p>Unser Angebot enthält Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.</p>
<h3 id="urheberrecht">Urheberrecht</h3>
<p>Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung, Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur für den privaten, nicht kommerziellen Gebrauch gestattet. Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen.</p>
<h3 id="datenschutz">Datenschutz</h3>
<p>Die Nutzung unserer Webseite ist in der Regel ohne Angabe personenbezogener Daten möglich. Soweit auf unseren Seiten personenbezogene Daten (beispielsweise Name, Anschrift oder eMail-Adressen) erhoben werden, erfolgt dies, soweit möglich, stets auf freiwilliger Basis. Diese Daten werden ohne Ihre ausdrückliche Zustimmung nicht an Dritte weitergegeben.
Wir weisen darauf hin, dass die Datenübertragung im Internet (z.B. bei der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht möglich.
Der Nutzung von im Rahmen der Impressumspflicht veröffentlichten Kontaktdaten durch Dritte zur Übersendung von nicht ausdrücklich angeforderter Werbung und Informationsmaterialien wird hiermit ausdrücklich widersprochen. Die Betreiber der Seiten behalten sich ausdrücklich rechtliche Schritte im Falle der unverlangten Zusendung von Werbeinformationen, etwa durch Spam-Mails, vor.</p>
<h3 id="google-analytics">Google Analytics</h3>
<p>Diese Website benutzt Google Analytics, einen Webanalysedienst der Google Inc. (&lsquo;&lsquo;Google&rsquo;&rsquo;). Google Analytics verwendet sog. &lsquo;&lsquo;Cookies&rsquo;&rsquo;, Textdateien, die auf Ihrem Computer gespeichert werden und die eine Analyse der Benutzung der Website durch Sie ermöglicht. Die durch den Cookie erzeugten Informationen über Ihre Benutzung dieser Website (einschließlich Ihrer IP-Adresse) wird an einen Server von Google in den USA übertragen und dort gespeichert. Google wird diese Informationen benutzen, um Ihre Nutzung der Website auszuwerten, um Reports über die Websiteaktivitäten für die Websitebetreiber zusammenzustellen und um weitere mit der Websitenutzung und der Internetnutzung verbundene Dienstleistungen zu erbringen. Auch wird Google diese Informationen gegebenenfalls an Dritte übertragen, sofern dies gesetzlich vorgeschrieben oder soweit Dritte diese Daten im Auftrag von Google verarbeiten. Google wird in keinem Fall Ihre IP-Adresse mit anderen Daten der Google in Verbindung bringen. Sie können die Installation der Cookies durch eine entsprechende Einstellung Ihrer Browser Software verhindern; wir weisen Sie jedoch darauf hin, dass Sie in diesem Fall gegebenenfalls nicht sämtliche Funktionen dieser Website voll umfänglich nutzen können. Durch die Nutzung dieser Website erklären Sie sich mit der Bearbeitung der über Sie erhobenen Daten durch Google in der zuvor beschriebenen Art und Weise und zu dem zuvor benannten Zweck einverstanden.</p>
<h3 id="google-adsense">Google AdSense</h3>
<p>Diese Website benutzt Google Adsense, einen Webanzeigendienst der Google Inc., USA (&lsquo;&lsquo;Google&rsquo;&rsquo;). Google Adsense verwendet sog. &lsquo;&lsquo;Cookies&rsquo;&rsquo; (Textdateien), die auf Ihrem Computer gespeichert werden und die eine Analyse der Benutzung der Website durch Sie ermöglicht. Google Adsense verwendet auch sog. &lsquo;&lsquo;Web Beacons&rsquo;&rsquo; (kleine unsichtbare Grafiken) zur Sammlung von Informationen. Durch die Verwendung des Web Beacons können einfache Aktionen wie der Besucherverkehr auf der Webseite aufgezeichnet und gesammelt werden. Die durch den Cookie und/oder Web Beacon erzeugten Informationen über Ihre Benutzung dieser Website (einschließlich Ihrer IP-Adresse) werden an einen Server von Google in den USA übertragen und dort gespeichert. Google wird diese Informationen benutzen, um Ihre Nutzung der Website im Hinblick auf die Anzeigen auszuwerten, um Reports über die Websiteaktivitäten und Anzeigen für die Websitebetreiber zusammenzustellen und um weitere mit der Websitenutzung und der Internetnutzung verbundene Dienstleistungen zu erbringen. Auch wird Google diese Informationen gegebenenfalls an Dritte übertragen, sofern dies gesetzlich vorgeschrieben oder soweit Dritte diese Daten im Auftrag von Google verarbeiten. Google wird in keinem Fall Ihre IP-Adresse mit anderen Daten der Google in Verbindung bringen. Das Speichern von Cookies auf Ihrer Festplatte und die Anzeige von Web Beacons können Sie verhindern, indem Sie in Ihren Browser-Einstellungen &lsquo;&lsquo;keine Cookies akzeptieren&rsquo;&rsquo; wählen (Im MS Internet-Explorer unter &lsquo;&lsquo;Extras &gt; Internetoptionen &gt; Datenschutz &gt; Einstellung&rsquo;&rsquo;; im Firefox unter &lsquo;&lsquo;Extras &gt; Einstellungen &gt; Datenschutz &gt; Cookies&rsquo;&rsquo;); wir weisen Sie jedoch darauf hin, dass Sie in diesem Fall gegebenenfalls nicht sämtliche Funktionen dieser Website voll umfänglich nutzen können. Durch die Nutzung dieser Website erklären Sie sich mit der Bearbeitung der über Sie erhobenen Daten durch Google in der zuvor beschriebenen Art und Weise und zu dem zuvor benannten Zweck einverstanden.</p>
<p>Website Impressum erstellt durch impressum-generator.de von der Kanzlei Hasselbach</p>
]]></description></item><item><title>talks</title><link>https://blog.dazzlog.de/talks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.dazzlog.de/talks/</guid><description><![CDATA[<h2 id="2025">2025</h2>
<ul>
<li><a href="https://www.meetup.com/sfugcgn">Symfony UG Cologne</a> – <a href="https://www.meetup.com/de-DE/sfugcgn/events/308227980/">Running Symfony in a Multi-Process Container</a></li>
<li><a href="https://www.phpday.it/">phpday Verona 2025</a> – <a href="https://www.phpday.it/talks_speakers/#Running-PHP-Applications-in-a-Multi-Process-Container">Running PHP-Applications in a Multi-Process Container </a></li>
<li><a href="https://live.symfony.com/2025-berlin/">SymfonyLive Berlin 2025</a> – <a href="https://live.symfony.com/2025-berlin/schedule/running-symfony-in-a-multi-process-container">Running Symfony in a Multi-Process Container</a></li>
</ul>
<h2 id="2024">2024</h2>
<ul>
<li><a href="https://live.symfony.com/2024-vienna-con/">SymfonyCon Vienna 2024</a> – <a href="https://live.symfony.com/2024-vienna-con/schedule/running-symfony-in-a-multi-process-container">Running Symfony in a Multi-Process
Container</a> | <a href="https://speakerdeck.com/dazz/running-symfony-in-multi-process-containers">Slides</a></li>
<li><a href="https://phpdd.org/">#PHPDD24</a> – <a href="https://phpdd.org/#speaker-7">Running PHP-Applications in a Multi-Process Container</a> | <a href="https://www.youtube.com/watch?v=fvC13yac2N8"></a></li>
<li><a href="https://www.meetup.com/de-DE/sfugberlin">Symfony User Group Berlin</a> - <a href="https://www.meetup.com/de-DE/sfugberlin/events/303072411">s6-overlay: Symfony in a Multi-Process container</a></li>
</ul>
<h2 id="2023">2023</h2>
<ul>
<li><a href="https://live.symfony.com/2023-brussels-con/">SymfonyCon Brussels 2023</a> – From Chaos to Control: Exception Handling in Symfony</li>
<li><a href="https://live.symfony.com/2023-berlin/">SymfonyLive Berlin 2023</a> – <a href="https://speakerdeck.com/dazz/von-chaos-zu-kontrolle-exception-handling-in-symfony">Von Chaos zu Kontrolle: Exception Handling in
Symfony</a></li>
<li><a href="https://www.meetup.com/de-DE/sfugberlin">Symfony User Group Berlin</a> - <a href="https://www.meetup.com/de-DE/sfugberlin/events/296791213">From Chaos to Control: Exception Handling in Symfony</a></li>
</ul>
<h2 id="2018">2018</h2>
<ul>
<li><a href="https://live.symfony.com/2018-berlin/">SymfonyLive Berlin 2018</a> – Wie man Dinge gut benennt | <a href="https://speakerdeck.com/dazz/wie-man-dinge-gut-benennt">Slides</a> | <a href="https://www.youtube.com/watch?v=MP68H0c6VgI"></a> | <a href="https://www.youtube.com/watch?v=VB-38COTgrg"></a></li>
</ul>
<h2 id="2015">2015</h2>
<ul>
<li>PHPUK15 – <a href="https://speakerdeck.com/dazz/naming-things">Naming things – The art of writing meaningful code</a></li>
</ul>
<h2 id="2014">2014</h2>
<ul>
<li><a href="https://www.bephpug.de/">BePhpUg</a> – <a href="https://speakerdeck.com/dazz/nomen-est-omen-naming-things-considered-hard">Nomen est Omen - Naming things considered hard</a></li>
</ul>
]]></description></item><item><title>ui</title><link>https://blog.dazzlog.de/ui/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.dazzlog.de/ui/</guid><description><![CDATA[<h2 id="admonition">Admonition</h2>
<div class="details admonition note open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf040;</i> This is a note<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Use the note shortcode when you want to draw attention to information subtly. note is intended to be less of an interruption in content than is warning.</div>
  </div>
</div>
<div class="details admonition abstract open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf15c;</i> This is a abstract<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition info open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf05a;</i> This is an info<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition tip open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf400;</i> This is a tip<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Use the tip shortcode when you want to give the reader advice. tip, like note, is intended to be less of an interruption in content than is warning.</div>
  </div>
</div>
<div class="details admonition success open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf058;</i> This is a success<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition question open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf128;</i> This is a question<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition warning open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf071;</i> This is an warning<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Use the warning shortcode when you want to draw the user’s attention to something important. A good usage example is for articulating breaking changes in Hugo versions, known bugs, or templating “gotchas.”</div>
  </div>
</div>
<div class="details admonition failure open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf057;</i> This is a failure<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition danger open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xfb8a;</i> This is danger<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition bug open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf188;</i> This is a bug<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition example open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#Xf03a;</i> This is an example<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition quote open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf10d;</i> This is a quote<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition symfony open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xe756;</i> This is a symfony<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition php open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xe73d;</i> This is a php<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition docker open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf308;</i> This is a docker<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<div class="details admonition tldr open">
  <div class="details-summary admonition-title">
    <i class="icon ">&#xf259;</i> This is a tldr;<i class="details-icon fas fa-angle-right fa-fw"></i>
  </div>
  <div class="details-content">
    <div class="admonition-content">Lorem Ipsum</div>
  </div>
</div>
<h2 id="fontawesome-cheat-sheet">FontAwesome cheat sheet</h2>
<p><a href="https://forkaweso.me/Fork-Awesome/cheatsheet/">https://forkaweso.me/Fork-Awesome/cheatsheet/</a></p>
]]></description></item></channel></rss>